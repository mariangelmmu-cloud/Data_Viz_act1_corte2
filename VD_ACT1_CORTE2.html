
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Visualización de datos: Actividad 1 - corte 2 &#8212; Taller de Imputación de Datos</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'VD_ACT1_CORTE2';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Taller de Imputación de Datos" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
  
    <p class="title logo__title">Taller de Imputación de Datos</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Taller de Imputación de Datos
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><em><strong>Visualización de datos: Actividad 1 - corte 2</strong></em></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/mariangelmmu-cloud/Data_Viz_act1_corte2.git" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mariangelmmu-cloud/Data_Viz_act1_corte2.git/issues/new?title=Issue%20on%20page%20%2FVD_ACT1_CORTE2.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/VD_ACT1_CORTE2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Visualización de datos: Actividad 1 - corte 2</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploracion-inicial-de-las-variables"><em><strong>1. Exploración inicial de las variables</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-dataset"><em><strong>1.1. Cargar dataset</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identificar-variables-cualitativas-y-cuantitativas"><em><strong>1.2. Identificar variables cualitativas y cuantitativas</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#observar-la-estructura-general-de-la-base-de-datos"><em><strong>1.3. Observar la estructura general de la base de datos</strong></em></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deteccion-de-valores-faltantes"><em><strong>2. Detección de valores faltantes</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#porcentajes"><em><strong>2.1. Porcentajes</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#representacion-grafica"><em><strong>2.2. Representación gráfica</strong></em></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clasificacion-del-tipo-faltante"><em><strong>3. Clasificación del tipo faltante</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#discusion-sobre-imputabilidad"><em><strong>4. Discusión sobre imputabilidad</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#representacion-de-la-imputacion"><em><strong>5. Representación de la imputación</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-numericas"><em><strong>5.1. Variables numéricas</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#knn-numericas"><em><strong>5.1.1. <code class="docutils literal notranslate"><span class="pre">knn</span> <span class="pre">-</span> <span class="pre">numéricas:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#regresion"><em><strong>5.1.2. <code class="docutils literal notranslate"><span class="pre">Regresión</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#media"><em><strong>5.1.3. <code class="docutils literal notranslate"><span class="pre">Media</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mediana"><em><strong>5.1.4. <code class="docutils literal notranslate"><span class="pre">Mediana</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#graficas-antes-y-despues"><em><strong>5.1.5. Gráficas antes y después:</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#knn"><em><strong>5.1.5.1. Knn</strong></em></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><em><strong>5.1.5.2. Regresión</strong></em></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id2"><em><strong>5.1.5.3. Media</strong></em></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id3"><em><strong>5.1.5.4. Mediana</strong></em></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-categoricas"><em><strong>5.2. Variables categóricas</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#knn-categoricas"><em><strong>5.2.1. <code class="docutils literal notranslate"><span class="pre">knn</span> <span class="pre">-</span> <span class="pre">categóricas:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hot-deck"><em><strong>5.2.2.<code class="docutils literal notranslate"><span class="pre">hot-deck:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#moda"><em><strong>5.2.3. <code class="docutils literal notranslate"><span class="pre">moda</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#grafico-de-barras"><em><strong>5.2.4. <code class="docutils literal notranslate"><span class="pre">Gráfico</span> <span class="pre">de</span> <span class="pre">barras:</span></code></strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id4"><strong>5.2.4.1. <code class="docutils literal notranslate"><span class="pre">knn:</span></code></strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id5"><strong>5.2.4.2. <code class="docutils literal notranslate"><span class="pre">hot-deck:</span></code></strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id6"><strong>5.2.4.3. <code class="docutils literal notranslate"><span class="pre">moda:</span></code></strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluacion-de-la-imputacion"><em><strong>6. Evaluación de la imputación</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pruebas-de-normalidad"><em><strong>6.1. Pruebas de normalidad</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pruebas-de-igualdad-de-distribuciones"><em><strong>6.2. Pruebas de igualdad de distribuciones</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id7"><em><strong>6.2.1. Variables numéricas</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id8"><em><strong>6.2.2. Variables categóricas</strong></em></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-de-medias-o-rangos"><em><strong>6.3. Comparación de medias o rangos</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-general-de-los-metodos-de-imputacion-segun-la-comparacion-de-medias-rangos"><strong>6.4. Comparación general de los métodos de imputación (según la comparación de medias/rangos)</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#metodos-para-variables-categoricas">Métodos para variables <strong>categóricas</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#metodos-para-variables-numericas">Métodos para variables <strong>numéricas</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion-general">Conclusión general</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conlusion-preliminar"><em><strong>7. Conlusión preliminar</strong></em></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="visualizacion-de-datos-actividad-1-corte-2">
<h1><em><strong>Visualización de datos: Actividad 1 - corte 2</strong></em><a class="headerlink" href="#visualizacion-de-datos-actividad-1-corte-2" title="Link to this heading">#</a></h1>
<section id="exploracion-inicial-de-las-variables">
<h2><em><strong>1. Exploración inicial de las variables</strong></em><a class="headerlink" href="#exploracion-inicial-de-las-variables" title="Link to this heading">#</a></h2>
<section id="cargar-dataset">
<h3><em><strong>1.1. Cargar dataset</strong></em><a class="headerlink" href="#cargar-dataset" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;base_imputacion_mixta_1000.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="identificar-variables-cualitativas-y-cuantitativas">
<h3><em><strong>1.2. Identificar variables cualitativas y cuantitativas</strong></em><a class="headerlink" href="#identificar-variables-cualitativas-y-cuantitativas" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">num_var</span> <span class="o">=</span> <span class="n">numericas</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Variables numéricas:&quot;</span><span class="p">,</span> <span class="n">numericas</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Variables numéricas: [&#39;edad&#39;, &#39;altura_cm&#39;, &#39;ingresos&#39;, &#39;gasto_mensual&#39;, &#39;puntuacion_credito&#39;, &#39;demanda&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">categoricas</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Variables categóricas:&quot;</span><span class="p">,</span> <span class="n">categoricas</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Variables categóricas: [&#39;fecha&#39;, &#39;sexo&#39;, &#39;ciudad&#39;, &#39;nivel_educativo&#39;, &#39;segmento&#39;, &#39;estado_civil&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="observar-la-estructura-general-de-la-base-de-datos">
<h3><em><strong>1.3. Observar la estructura general de la base de datos</strong></em><a class="headerlink" href="#observar-la-estructura-general-de-la-base-de-datos" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 1000 entries, 0 to 999
Data columns (total 12 columns):
 #   Column              Non-Null Count  Dtype  
---  ------              --------------  -----  
 0   fecha               1000 non-null   object 
 1   sexo                980 non-null    object 
 2   ciudad              950 non-null    object 
 3   nivel_educativo     900 non-null    object 
 4   segmento            800 non-null    object 
 5   estado_civil        650 non-null    object 
 6   edad                970 non-null    float64
 7   altura_cm           920 non-null    float64
 8   ingresos            880 non-null    float64
 9   gasto_mensual       750 non-null    float64
 10  puntuacion_credito  500 non-null    float64
 11  demanda             850 non-null    float64
dtypes: float64(6), object(6)
memory usage: 93.9+ KB
</pre></div>
</div>
</div>
</div>
<p>La base de datos cuenta con 1000 inatancias y 12 variables.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fecha</th>
      <th>sexo</th>
      <th>ciudad</th>
      <th>nivel_educativo</th>
      <th>segmento</th>
      <th>estado_civil</th>
      <th>edad</th>
      <th>altura_cm</th>
      <th>ingresos</th>
      <th>gasto_mensual</th>
      <th>puntuacion_credito</th>
      <th>demanda</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2024-01-01</td>
      <td>F</td>
      <td>Medellín</td>
      <td>NaN</td>
      <td>B</td>
      <td>Unión libre</td>
      <td>19.0</td>
      <td>161.821754</td>
      <td>3574.753806</td>
      <td>1832.731832</td>
      <td>640.465372</td>
      <td>119.202995</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2024-01-02</td>
      <td>F</td>
      <td>Barranquilla</td>
      <td>NaN</td>
      <td>B</td>
      <td>NaN</td>
      <td>52.0</td>
      <td>167.819566</td>
      <td>3163.626815</td>
      <td>NaN</td>
      <td>533.108430</td>
      <td>124.457874</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2024-01-03</td>
      <td>M</td>
      <td>Bogotá</td>
      <td>Secundaria</td>
      <td>B</td>
      <td>Soltero/a</td>
      <td>38.0</td>
      <td>165.756219</td>
      <td>2765.672259</td>
      <td>1219.535074</td>
      <td>491.016910</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2024-01-04</td>
      <td>F</td>
      <td>Bogotá</td>
      <td>NaN</td>
      <td>B</td>
      <td>Casado/a</td>
      <td>57.0</td>
      <td>160.642670</td>
      <td>4320.397345</td>
      <td>1908.324816</td>
      <td>NaN</td>
      <td>129.426792</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2024-01-05</td>
      <td>M</td>
      <td>Cali</td>
      <td>Técnico</td>
      <td>B</td>
      <td>Soltero/a</td>
      <td>67.0</td>
      <td>151.402909</td>
      <td>NaN</td>
      <td>1887.385697</td>
      <td>610.213994</td>
      <td>133.916319</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fecha</th>
      <th>sexo</th>
      <th>ciudad</th>
      <th>nivel_educativo</th>
      <th>segmento</th>
      <th>estado_civil</th>
      <th>edad</th>
      <th>altura_cm</th>
      <th>ingresos</th>
      <th>gasto_mensual</th>
      <th>puntuacion_credito</th>
      <th>demanda</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>995</th>
      <td>2026-09-22</td>
      <td>M</td>
      <td>Cali</td>
      <td>Universitario</td>
      <td>B</td>
      <td>Divorciado/a</td>
      <td>42.0</td>
      <td>174.029439</td>
      <td>3900.871957</td>
      <td>1726.737261</td>
      <td>NaN</td>
      <td>209.333348</td>
    </tr>
    <tr>
      <th>996</th>
      <td>2026-09-23</td>
      <td>F</td>
      <td>Cali</td>
      <td>NaN</td>
      <td>B</td>
      <td>Soltero/a</td>
      <td>57.0</td>
      <td>172.937551</td>
      <td>3510.958513</td>
      <td>1158.564446</td>
      <td>702.765666</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>997</th>
      <td>2026-09-24</td>
      <td>M</td>
      <td>Bogotá</td>
      <td>Técnico</td>
      <td>NaN</td>
      <td>Casado/a</td>
      <td>69.0</td>
      <td>172.978652</td>
      <td>5835.890293</td>
      <td>NaN</td>
      <td>547.840036</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>998</th>
      <td>2026-09-25</td>
      <td>F</td>
      <td>Bogotá</td>
      <td>Posgrado</td>
      <td>C</td>
      <td>Casado/a</td>
      <td>48.0</td>
      <td>NaN</td>
      <td>3809.637777</td>
      <td>1275.292213</td>
      <td>510.525079</td>
      <td>214.627744</td>
    </tr>
    <tr>
      <th>999</th>
      <td>2026-09-26</td>
      <td>M</td>
      <td>Bogotá</td>
      <td>Universitario</td>
      <td>B</td>
      <td>Soltero/a</td>
      <td>53.0</td>
      <td>174.410385</td>
      <td>3766.247687</td>
      <td>2559.455016</td>
      <td>700.720902</td>
      <td>204.091366</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Se puede observar que hay datos NA’s.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>edad</th>
      <th>altura_cm</th>
      <th>ingresos</th>
      <th>gasto_mensual</th>
      <th>puntuacion_credito</th>
      <th>demanda</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>970.000000</td>
      <td>920.000000</td>
      <td>880.000000</td>
      <td>750.000000</td>
      <td>500.000000</td>
      <td>850.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>42.861856</td>
      <td>167.760096</td>
      <td>3681.294745</td>
      <td>1687.810749</td>
      <td>599.077500</td>
      <td>160.305759</td>
    </tr>
    <tr>
      <th>std</th>
      <td>14.621382</td>
      <td>9.275530</td>
      <td>1079.326096</td>
      <td>582.070174</td>
      <td>79.828186</td>
      <td>25.357794</td>
    </tr>
    <tr>
      <th>min</th>
      <td>18.000000</td>
      <td>140.000000</td>
      <td>487.662547</td>
      <td>100.000000</td>
      <td>373.657944</td>
      <td>99.875828</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>30.000000</td>
      <td>161.488768</td>
      <td>2999.416229</td>
      <td>1309.239768</td>
      <td>544.467843</td>
      <td>139.505538</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>43.000000</td>
      <td>167.714614</td>
      <td>3669.620507</td>
      <td>1676.193764</td>
      <td>599.692595</td>
      <td>160.721251</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>55.000000</td>
      <td>173.999069</td>
      <td>4375.093656</td>
      <td>2063.260990</td>
      <td>653.345068</td>
      <td>181.100754</td>
    </tr>
    <tr>
      <th>max</th>
      <td>69.000000</td>
      <td>195.766921</td>
      <td>7016.246936</td>
      <td>3532.593603</td>
      <td>823.539585</td>
      <td>222.093047</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="deteccion-de-valores-faltantes">
<h2><em><strong>2. Detección de valores faltantes</strong></em><a class="headerlink" href="#deteccion-de-valores-faltantes" title="Link to this heading">#</a></h2>
<section id="porcentajes">
<h3><em><strong>2.1. Porcentajes</strong></em><a class="headerlink" href="#porcentajes" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">resumen_faltantes</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">faltantes</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">porcentaje</span> <span class="o">=</span> <span class="p">(</span><span class="n">faltantes</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;Valores faltantes&#39;</span><span class="p">:</span> <span class="n">faltantes</span><span class="p">,</span>
        <span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">:</span> <span class="n">porcentaje</span>
    <span class="p">})</span>

    <span class="c1"># Filtrar solo las columnas que tienen NA</span>
    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">tabla_faltantes</span><span class="p">[</span><span class="n">tabla_faltantes</span><span class="p">[</span><span class="s1">&#39;Valores faltantes&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
    
    <span class="c1"># Ordenar por porcentaje descendente</span>
    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">tabla_faltantes</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">tabla_faltantes</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_faltantes</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Valores faltantes</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>puntuacion_credito</th>
      <td>500</td>
      <td>50.0</td>
    </tr>
    <tr>
      <th>estado_civil</th>
      <td>350</td>
      <td>35.0</td>
    </tr>
    <tr>
      <th>gasto_mensual</th>
      <td>250</td>
      <td>25.0</td>
    </tr>
    <tr>
      <th>segmento</th>
      <td>200</td>
      <td>20.0</td>
    </tr>
    <tr>
      <th>demanda</th>
      <td>150</td>
      <td>15.0</td>
    </tr>
    <tr>
      <th>ingresos</th>
      <td>120</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>nivel_educativo</th>
      <td>100</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>altura_cm</th>
      <td>80</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>ciudad</th>
      <td>50</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>edad</th>
      <td>30</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>sexo</th>
      <td>20</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="representacion-grafica">
<h3><em><strong>2.2. Representación gráfica</strong></em><a class="headerlink" href="#representacion-grafica" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">missing</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">missing</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="s2">&quot;Proporcion&quot;</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;Proporcion&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">missing</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;Blues&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Proporción de valores faltantes por variable&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_15632\419670205.py:5: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `y` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(x=&quot;Proporcion&quot;, y=&quot;Variable&quot;, data=missing, palette=&quot;Blues&quot;)
</pre></div>
</div>
<img alt="_images/aff807e744ca035268f74232aa4ad76de35db593fdd070dabb4b3d56af9d061a.png" src="_images/aff807e744ca035268f74232aa4ad76de35db593fdd070dabb4b3d56af9d061a.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">yticklabels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;plasma&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Mapa de calor de valores faltantes&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a50ed8a0b4661b29bf0b60a7806000b9e8e0579da2fa699754a68a2d95e16f15.png" src="_images/a50ed8a0b4661b29bf0b60a7806000b9e8e0579da2fa699754a68a2d95e16f15.png" />
</div>
</div>
<p>Del análsisi anterior de valores faltantes podemos concluir que: la variable con más datos faltantes es <code class="docutils literal notranslate"><span class="pre">puntuacion_credito</span></code>, con un 50%, seguida de <code class="docutils literal notranslate"><span class="pre">estado_civil</span></code> (35%) y <code class="docutils literal notranslate"><span class="pre">gasto_mensual</span></code> (25%). Otras variables como <code class="docutils literal notranslate"><span class="pre">sexo</span></code>, <code class="docutils literal notranslate"><span class="pre">ciudad</span></code> o <code class="docutils literal notranslate"><span class="pre">fecha</span></code> tienen porcentajes muy bajos (menores al 5%). Esta visualización permite identificar fácilmente qué variables podrían requerir una imputación más cuidadosa o incluso ser descartadas si el porcentaje de datos faltantes es muy alto.</p>
</section>
</section>
<section id="clasificacion-del-tipo-faltante">
<h2><em><strong>3. Clasificación del tipo faltante</strong></em><a class="headerlink" href="#clasificacion-del-tipo-faltante" title="Link to this heading">#</a></h2>
<p>En primer lugar separo por medio de flags los datos faltantes y los que no.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;flag_</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">missingno</span>


<span class="n">df</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span> <span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="p">(</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">])</span>
        <span class="p">)</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">missingno</span><span class="o">.</span><span class="n">matrix</span>
    <span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                    </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">import</span><span class="w"> </span><span class="nn">missingno</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">df</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span> <span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="p">(</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">])</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>         <span class="p">)</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">missingno</span><span class="o">.</span><span class="n">matrix</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="p">)</span> 

<span class="ne">ModuleNotFoundError</span>: No module named &#39;missingno&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>

<span class="k">def</span><span class="w"> </span><span class="nf">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">flag_variable</span><span class="p">,</span> <span class="n">max_cols</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>

    <span class="n">variable_original</span> <span class="o">=</span> <span class="n">flag_variable</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;flag_&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    
    <span class="c1"># Variables con las que comparar (excluye flags, fecha y la misma variable)</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">col</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;flag_&quot;</span><span class="p">)</span>
        <span class="ow">and</span> <span class="s2">&quot;fecha&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="ow">and</span> <span class="n">col</span> <span class="o">!=</span> <span class="n">variable_original</span>
    <span class="p">]</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Analizando: </span><span class="si">{</span><span class="n">flag_variable</span><span class="si">}</span><span class="s2"> vs otras variables (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span><span class="si">}</span><span class="s2"> gráficas)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">max_cols</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">n</span> <span class="o">/</span> <span class="n">cols</span><span class="p">)</span>
    
    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">cols</span> <span class="o">*</span> <span class="mi">6</span><span class="p">,</span> <span class="n">rows</span> <span class="o">*</span> <span class="mi">4</span><span class="p">))</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>  <span class="c1"># Aplana para indexar fácilmente</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variables</span><span class="p">):</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_numeric_dtype</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">var</span><span class="p">]):</span>
                <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">flag_variable</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s1"> por </span><span class="si">{</span><span class="n">flag_variable</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="n">flag_variable</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">flag_variable</span><span class="si">}</span><span class="s1"> según </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">flag_variable</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;No se pudo graficar </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
    
    <span class="c1"># Apagar ejes sobrantes si hay</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">)):</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_puntuacion_credito&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_puntuacion_credito vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/00aad35630d523ba0b5b46e23b15a4fc59db4831f0e6425247d56257c760ff4d.png" src="_images/00aad35630d523ba0b5b46e23b15a4fc59db4831f0e6425247d56257c760ff4d.png" />
</div>
</div>
<p>Al observar las gráficas del flag de <code class="docutils literal notranslate"><span class="pre">puntuacion_credito</span></code> frente a las demás variables, se nota que la distribución de los datos faltantes es bastante similar entre los diferentes grupos de variables categóricas como sexo, ciudad, nivel educativo, segmento y estado civil, donde las barras de los valores presentes (0) y faltantes (1) se mantienen casi iguales en altura. Además, en las variables numéricas como edad, altura, ingresos, gasto mensual y demanda, los boxplots muestran distribuciones muy parecidas para ambos grupos de datos, con medianas, rangos intercuartílicos y valores atípicos muy similares. Esto indica que no hay una dependencia visible entre la presencia o ausencia de datos en <code class="docutils literal notranslate"><span class="pre">puntuacion_credito</span></code> y las otras variables del dataset. Por lo tanto, los valores faltantes en esta variable pueden clasificarse como <strong>MCAR (Missing Completely At Random)</strong>, ya que parecen ocurrir de manera aleatoria y no están relacionados ni con otras variables observadas ni con los valores de la misma variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_estado_civil&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_estado_civil vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/ebdb6cb43186294d9313ca7854e9e893ce5aad641cd2b74297c1a3dfeb9fef8f.png" src="_images/ebdb6cb43186294d9313ca7854e9e893ce5aad641cd2b74297c1a3dfeb9fef8f.png" />
</div>
</div>
<p>Analizando las gráficas que muestran la distribución del <code class="docutils literal notranslate"><span class="pre">estado</span> <span class="pre">civil</span></code> con respecto a otras variables, se observa que las proporciones de valores faltantes (flag_estado_civil = 1) varían significativamente según categorías como sexo, ciudad, nivel educativo y segmento. Por ejemplo, hay más valores faltantes en mujeres que en hombres, y también hay diferencias claras en ciertas ciudades y niveles educativos. Además, las distribuciones de variables continuas como edad, altura, ingresos, gasto mensual, puntuación de crédito y demanda no presentan grandes diferencias entre filas con y sin valores faltantes en estado civil, lo que indica que la ausencia no depende directamente de estas variables numéricas. Esto sugiere que los valores faltantes en estado civil no son completamente aleatorios (MCAR), sino que dependen de variables observadas como sexo, ciudad y nivel educativo. Por lo tanto, los datos faltantes en estado civil parecen ser del tipo <strong>MAR (Missing At Random)</strong>, donde la ausencia está relacionada con otras características observadas pero no con el valor mismo de la variable faltante.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_gasto_mensual&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_gasto_mensual vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/a4a09854eae8337eb1c82cd97d2a0fe822bb0e212a669f5e953452bb1ce1ad94.png" src="_images/a4a09854eae8337eb1c82cd97d2a0fe822bb0e212a669f5e953452bb1ce1ad94.png" />
</div>
</div>
<p>Al observar las gráficas que muestran la variable <code class="docutils literal notranslate"><span class="pre">flag_gasto_mensual</span></code> en función de diferentes categorías y variables continuas, se nota que las proporciones de valores faltantes varían claramente según sexo, ciudad, nivel educativo, segmento y estado civil. Por ejemplo, las mujeres tienen más valores faltantes que los hombres, y ciudades como Bogotá presentan una mayor cantidad de datos faltantes. Además, aunque las variables continuas como altura, ingresos, puntuación de crédito y demanda muestran distribuciones similares para filas con y sin datos faltantes, se observan ciertas diferencias en la variable edad, donde quienes tienen datos faltantes tienden a ser un poco más jóvenes en promedio. Estos patrones indican que los valores faltantes no ocurren de forma aleatoria sino que dependen de otras variables observadas. Por ello, se puede concluir que los datos faltantes en gasto mensual son del tipo <strong>MAR (Missing At Random)</strong>, ya que la ausencia está relacionada con otras características observables pero no con el valor de gasto mensual en sí mismo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_segmento&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_segmento vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/9a05eca72fc4633fec8af1cc85ea22af93704f5f702fae57304f5bda150c8627.png" src="_images/9a05eca72fc4633fec8af1cc85ea22af93704f5f702fae57304f5bda150c8627.png" />
</div>
</div>
<p>Al analizar las gráficas que relacionan el <code class="docutils literal notranslate"><span class="pre">flag_segmento</span></code> con variables categóricas y numéricas, se observa que la proporción de datos faltantes varía claramente según sexo, ciudad, nivel educativo y estado civil, indicando una relación entre los datos faltantes y estas variables observadas. Por ejemplo, en ciudades como Bogotá y Medellín hay una mayor cantidad de datos faltantes en comparación con otras ciudades, y también se nota que ciertos niveles educativos tienen más valores faltantes. Sin embargo, las variables continuas como edad, altura, ingresos, gasto mensual, puntuación de crédito y demanda presentan distribuciones bastante similares entre los grupos con y sin datos faltantes, sin diferencias muy marcadas que sugieran un sesgo fuerte. Esto sugiere que la ausencia de datos no depende directamente del valor del segmento, sino que está relacionada con otras características observables. Por lo tanto, se puede concluir que los valores faltantes para esta variable también son del tipo <strong>MAR (Missing At Random)</strong>, ya que la probabilidad de que falten datos depende de otras variables observadas en el dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_demanda&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_demanda vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/b26e0f9db5220c561b963f6f6c788e136592f7cbdec90155ae3007f838485ad3.png" src="_images/b26e0f9db5220c561b963f6f6c788e136592f7cbdec90155ae3007f838485ad3.png" />
</div>
</div>
<p>Al observar las gráficas relacionadas con el <code class="docutils literal notranslate"><span class="pre">flag_demanda</span></code>, se nota que la proporción de datos faltantes varía según variables categóricas como sexo, ciudad, nivel educativo, segmento y estado civil, mostrando que la ausencia de datos está relacionada con estas características observadas. Por ejemplo, hay una mayor cantidad de datos faltantes en ciertas ciudades como Bogotá y Medellín, y también en niveles educativos como secundaria y técnico. Sin embargo, cuando se analizan las variables continuas como edad, altura, ingresos, gasto mensual y puntuación de crédito, no se observan diferencias significativas en sus distribuciones entre quienes tienen y no tienen datos faltantes. Esto indica que la probabilidad de que falten datos no depende directamente del valor de la variable demanda sino de otras variables observadas en el conjunto de datos. Por lo tanto, estos valores faltantes pueden considerarse del tipo <strong>MAR (Missing At Random)</strong>, porque la ausencia de información depende de otras variables observadas y no del valor mismo de la variable que falta.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_ingresos&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_ingresos vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/0371afd3b32e3a922966f2b4dbca676834f32f377d4991bca3bc46bb3199698a.png" src="_images/0371afd3b32e3a922966f2b4dbca676834f32f377d4991bca3bc46bb3199698a.png" />
</div>
</div>
<p>Analizando las gráficas del <code class="docutils literal notranslate"><span class="pre">flag_ingresos</span></code>, se observa que la proporción de datos faltantes está relacionada con variables categóricas como sexo, ciudad, nivel educativo, segmento y estado civil, donde ciertos grupos presentan mayor ausencia de información. Por ejemplo, ciudades como Bogotá y Cali, o niveles educativos como secundaria y técnico muestran una mayor cantidad de valores faltantes en ingresos. Sin embargo, al revisar las variables continuas como edad, altura, gasto mensual, puntuación de crédito y demanda, las distribuciones son muy similares entre quienes tienen datos faltantes y quienes no. Esto sugiere que la probabilidad de que falten datos de ingresos no depende directamente del valor de los ingresos mismos, sino de otras características observadas en el conjunto de datos. Por lo tanto, estos valores faltantes también pueden considerarse del tipo <strong>MAR (Missing At Random)</strong>, dado que la ausencia de datos está condicionada por otras variables observadas y no por la variable ingresos en sí.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_nivel_educativo&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_nivel_educativo vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/4c761bb86468260a3124d310279e8c52f8a783f7bb24021846f7d899ff22f98d.png" src="_images/4c761bb86468260a3124d310279e8c52f8a783f7bb24021846f7d899ff22f98d.png" />
</div>
</div>
<p>Al observar las gráficas correspondientes al <code class="docutils literal notranslate"><span class="pre">flag_nivel_educativo</span></code>, se puede notar que la proporción de datos faltantes varía según categorías como sexo, ciudad, segmento y estado civil, lo que indica que ciertas subpoblaciones tienen más ausencia de información que otras. Por ejemplo, en ciudades como Bogotá y Barranquilla y en el estado civil de soltero/a hay una mayor cantidad de datos faltantes. Sin embargo, cuando se analizan las variables continuas como edad, altura, ingresos, gasto mensual, puntuación de crédito y demanda, no se aprecian diferencias notables en sus distribuciones entre quienes tienen y no tienen datos de nivel educativo. Esto indica que la ausencia de esta información no depende directamente del valor del nivel educativo ni de estas variables continuas, sino que está asociada a otras variables observadas. Por ende, podemos concluir que los valores faltantes en nivel educativo son del tipo <strong>MAR (Missing At Random)</strong>, ya que la probabilidad de que falten datos depende de otras variables observadas en el dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_altura_cm&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_altura_cm vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/b14fd1647b8dcadf15ea00fd3d425db1596af74865ce48943a33212bee301933.png" src="_images/b14fd1647b8dcadf15ea00fd3d425db1596af74865ce48943a33212bee301933.png" />
</div>
</div>
<p>Analizando las gráficas de barras y los boxplots para la variable <code class="docutils literal notranslate"><span class="pre">altura_cm</span></code> y su flag de datos faltantes, se observa que la proporción de datos faltantes no es completamente uniforme entre las categorías de sexo, ciudad, nivel educativo, segmento y estado civil. Por ejemplo, hay una ligera diferencia en la cantidad relativa de datos faltantes entre hombres y mujeres, así como entre ciudades como Bogotá y Cartagena. Además, en los boxplots, las distribuciones de variables como edad, ingresos y gasto mensual son similares entre los grupos con datos faltantes y sin datos faltantes, pero existen diferencias sutiles en algunas categorías. Esto sugiere que los datos faltantes no son completamente aleatorios (MCAR), sino que probablemente son <strong>Missing At Random (MAR)</strong>, donde la ausencia de datos depende parcialmente de variables observables como la ciudad o el nivel educativo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_ciudad&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_ciudad vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/50219d9523f819b278b0b0171c1f7cda60e8e884346e7a109eadeb9f464f7ba9.png" src="_images/50219d9523f819b278b0b0171c1f7cda60e8e884346e7a109eadeb9f464f7ba9.png" />
</div>
</div>
<p>Al observar las gráficas de barras y boxplots relacionadas con la variable <code class="docutils literal notranslate"><span class="pre">ciudad</span></code> y su flag de datos faltantes, se nota que la proporción de datos faltantes varía en función de algunas categorías como el nivel educativo y el estado civil, mientras que en sexo y segmento la proporción es más homogénea. Además, en las distribuciones de variables cuantitativas como ingresos, gasto mensual, edad y puntaje de crédito, se aprecian diferencias claras entre los grupos con y sin datos faltantes, especialmente en gasto mensual y puntaje de crédito, donde los valores tienden a ser menores en el grupo con datos faltantes. Esto indica que los valores faltantes en la variable ciudad no están distribuidos de forma completamente aleatoria (no MCAR), sino que dependen de características observables y de otras variables en el conjunto de datos, lo que sugiere un mecanismo de <strong>Missing At Random (MAR)</strong>. Por lo tanto, la ausencia de información sobre ciudad está relacionada con otras variables del conjunto, y no es simplemente por azar.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_edad&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_edad vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/e32dc5005004e69acb864be3ba9cb7dcef82f942af7b5eb95f1990bd6343c48b.png" src="_images/e32dc5005004e69acb864be3ba9cb7dcef82f942af7b5eb95f1990bd6343c48b.png" />
</div>
</div>
<p>Al analizar las gráficas que muestran la variable <code class="docutils literal notranslate"><span class="pre">edad</span></code> con su flag de datos faltantes, se observa que la proporción de datos faltantes es bastante uniforme en categorías como sexo, ciudad, nivel educativo, segmento y estado civil, con solo ligeras variaciones que no parecen significativas. Además, las distribuciones de variables numéricas relacionadas como altura, ingresos, gasto mensual, puntaje de crédito y demanda muestran patrones similares entre los grupos con y sin datos faltantes, sin diferencias marcadas en sus medianas o rangos. Esto indica que los datos faltantes en la variable edad parecen estar distribuidos al azar, sin depender de otras características observables del conjunto de datos. Por lo tanto, se puede concluir que los valores faltantes en edad corresponden a un mecanismo <strong>Missing Completely At Random (MCAR)</strong>, es decir, la ausencia de información es completamente aleatoria y no está relacionada con otras variables del dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_faltante</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;flag_sexo&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Analizando: flag_sexo vs otras variables (10 gráficas)
</pre></div>
</div>
<img alt="_images/e219ec251f85d5cf0bc755d6d25b755af8c9020b14895d101e169a426c227eba.png" src="_images/e219ec251f85d5cf0bc755d6d25b755af8c9020b14895d101e169a426c227eba.png" />
</div>
</div>
<p>Al observar las gráficas que muestran la variable <code class="docutils literal notranslate"><span class="pre">sexo</span></code> junto con su flag de datos faltantes, se nota que la proporción de valores faltantes no está distribuida de manera uniforme entre las diferentes categorías de ciudad, nivel educativo, segmento y estado civil. En particular, algunos grupos como “Soltero/a” en estado civil y ciertos niveles educativos muestran más casos con datos faltantes que otros, lo que indica una relación entre la ausencia de información y estas variables categóricas. Además, las distribuciones de las variables numéricas como edad, altura, ingresos, gasto mensual, puntaje de crédito y demanda también presentan diferencias visibles entre los grupos con y sin datos faltantes. Esto sugiere que los valores faltantes en la variable sexo no son completamente aleatorios, sino que dependen de ciertas características observables. Por lo tanto, podemos concluir que los valores faltantes en sexo corresponden a un mecanismo <strong>Missing At Random (MAR)</strong>, es decir, la ausencia de datos está relacionada con otras variables del conjunto.</p>
</section>
<section id="discusion-sobre-imputabilidad">
<h2><em><strong>4. Discusión sobre imputabilidad</strong></em><a class="headerlink" href="#discusion-sobre-imputabilidad" title="Link to this heading">#</a></h2>
<p><strong>Puntuacion_credito</strong></p>
<p>Sí se debe imputar. La distribución de valores faltantes no es aleatoria, ya que hay diferencias claras por ciudad, segmento y nivel educativo. Por tanto, imputar es necesario para no eliminar grupos enteros del análisis. Como es una variable numérica, y la ausencia de datos está relacionada con otras variables, los métodos recomendados son <strong>KNN</strong> (porque puede capturar relaciones no lineales con otras variables) o <strong>regresión</strong> si hay una relación lineal clara. Evitar media y mediana, ya que podrían introducir sesgos por la no aleatoriedad de los faltantes.</p>
<p><strong>Estado_civil</strong></p>
<p>Sí se debe imputar. Los valores faltantes muestran diferencias por ciudad, sexo y nivel educativo, lo que indica que no son aleatorios. Como es una variable categórica, las mejores opciones son <strong>KNN</strong> (para capturar similitudes con otras personas) o <strong>hot-deck</strong>, que selecciona valores reales de registros similares.</p>
<p><strong>Gasto_mensual</strong></p>
<p>Sí se debe imputar. La ausencia de datos no es aleatoria, ya que depende de variables como ciudad, segmento y estado civil. Dado que es una variable numérica, y los faltantes tienen un patrón estructurado, las mejores técnicas serían <strong>KNN</strong> o <strong>regresión</strong>, ya que permiten imputar en función de otras variables relacionadas. La <strong>media</strong> o <strong>mediana</strong> podrían funcionar si se aplican por subgrupos, pero tienen más riesgo de simplificar demasiado los datos.</p>
<p><strong>Segmento</strong></p>
<p>Sí se debe imputar. La distribución de los valores faltantes en la variable <code class="docutils literal notranslate"><span class="pre">segmento</span></code> no es completamente aleatoria, ya que se observa una mayor concentración de datos faltantes en ciertas ciudades, niveles educativos y estados civiles. Esto sugiere que los faltantes son del tipo <strong>MAR</strong> (faltan condicionados a otras variables observadas). Imputar es necesario para no perder representatividad de ciertos grupos sociales. El riesgo de imputar incorrectamente radica en asignar categorías que no reflejen correctamente la condición socioeconómica de la persona, especialmente si se usa una técnica muy general. Por ser una variable categórica y por la estructura de los datos, la técnica más adecuada sería <strong>KNN</strong> o <strong>hot-deck</strong>, ya que pueden considerar múltiples variables relacionadas para realizar una imputación más precisa y coherente.</p>
<p><strong>Demanda</strong></p>
<p>Sí se debe imputar. En el caso de la variable <code class="docutils literal notranslate"><span class="pre">demanda</span></code>, los valores faltantes tampoco están completamente al azar, ya que su distribución muestra variaciones por segmento, ciudad y estado civil. Esto indica que los datos faltan de forma condicionada (MAR), por lo cual imputar se justifica para mantener la completitud del conjunto de datos. El principal riesgo es que al imputar sin tener en cuenta esta dependencia se distorsione la relación real entre la demanda y factores como los ingresos o el gasto mensual. Como se trata de una variable numérica con un patrón estructurado, las técnicas más adecuadas serían <strong>KNN</strong> o <strong>regresión</strong>, ya que permiten modelar la relación entre la demanda y otras variables relevantes, evitando los sesgos que implicaría usar simplemente la media o mediana.</p>
<p><strong>Ingresos</strong></p>
<p>Sí se debe imputar. La variable <code class="docutils literal notranslate"><span class="pre">ingresos</span></code> presenta una distribución de valores faltantes que depende claramente de otras variables como ciudad, nivel educativo y segmento, lo cual sugiere que los faltantes son del tipo MAR. Esto implica que imputar es necesario para no introducir un sesgo por eliminación de datos que no son aleatorios. El riesgo de imputar con técnicas simples como la media o mediana es que se ignoren las diferencias estructurales entre distintos grupos socioeconómicos, lo que puede afectar el análisis de desigualdad o comportamiento financiero. Por lo tanto, la técnica más adecuada es <strong>KNN</strong> si se quiere preservar relaciones no lineales, o <strong>regresión</strong> si la relación con otras variables (como edad o gasto) es lineal y clara.</p>
<p><strong>nivel_educativo</strong></p>
<p>Sí se justifica imputar esta variable porque los valores faltantes no se distribuyen de manera completamente aleatoria: hay diferencias leves según ciudad, estado civil y segmento, lo que indica que su ausencia podría estar relacionada con otras variables sociodemográficas. Dejar los nulos podría reducir la representatividad de ciertos grupos, especialmente en ciudades como Medellín o en segmentos como el B. El principal riesgo de imputar es introducir un sesgo si se usa una técnica simple como la moda, ya que podría sobrerrepresentar un nivel educativo dominante como secundaria. Por ser una variable categórica y considerando que su ausencia no es completamente aleatoria, lo más adecuado sería utilizar <strong>KNN</strong> o <strong>hot-deck</strong>, ya que estas técnicas permiten considerar similitudes con otras variables y así evitar distorsionar la distribución original.</p>
<p><strong>altura_cm</strong></p>
<p>Se debe imputar esta variable, ya que aunque los valores faltantes parecen estar distribuidos relativamente de manera similar entre grupos, hay ligeras diferencias por sexo, ciudad y estado civil que sugieren una no aleatoriedad total. Además, al ser una variable numérica y posiblemente útil para análisis posteriores, eliminar estos casos podría reducir la capacidad explicativa del modelo. El riesgo principal de imputar con métodos simples como la media o mediana es que podrían ignorar patrones importantes que se relacionan con otras variables como el sexo, que influye naturalmente en la estatura. Por eso, la mejor opción es usar <strong>KNN</strong> o <strong>regresión</strong>, ya que permiten aprovechar las correlaciones con otras variables numéricas como edad o ingresos, ofreciendo una imputación más contextualizada.</p>
<p><strong>ciudad</strong></p>
<p>Sí se debe imputar esta variable. Aunque los valores faltantes no son muy numerosos, su distribución muestra ciertas diferencias por estado civil y nivel educativo, lo que sugiere que su ausencia no es completamente aleatoria. Dejar los nulos podría llevar a eliminar observaciones valiosas para el análisis, especialmente porque ciudad puede ser una variable clave para segmentar comportamientos o políticas. El riesgo al imputar estaría en elegir una técnica inadecuada como la moda, que podría sobrerrepresentar ciudades con mayor frecuencia como Bogotá. Por ser una variable categórica y al estar relacionada con otras, lo más recomendable es usar <strong>hot-deck</strong> o <strong>KNN</strong>, ya que permiten mantener la coherencia entre ciudad y otras características del individuo sin imponer una única categoría dominante.</p>
<p><strong>Edad</strong></p>
<p>Sí se debe imputar. En este caso, los faltantes parecen estar distribuidos de forma más uniforme, lo que sugiere que podrían ser aleatorios. Por ser una variable numérica y con bajo riesgo de sesgo, <strong>mediana</strong> es la opción más adecuada, ya que es robusta frente a outliers. También se podría usar <strong>media</strong>, pero solo si la distribución de edad es relativamente simétrica, cosa que no siempre ocurre.</p>
<p><strong>Sexo</strong></p>
<p>No se recomienda imputar. El sexo tiene muy pocos valores faltantes y, por los gráficos, estos parecen distribuidos casi aleatoriamente. Imputar podría introducir errores de clasificación en una variable categórica binaria muy sensible. Además, dado que no hay una relación clara con otras variables para inferir el sexo, cualquier imputación se basaría más en suposiciones que en evidencia. En este caso, lo más prudente sería <strong>dejar los nulos o eliminar esos pocos registros</strong>, si el análisis lo permite.</p>
</section>
<section id="representacion-de-la-imputacion">
<h2><em><strong>5. Representación de la imputación</strong></em><a class="headerlink" href="#representacion-de-la-imputacion" title="Link to this heading">#</a></h2>
<section id="variables-numericas">
<h3><em><strong>5.1. Variables numéricas</strong></em><a class="headerlink" href="#variables-numericas" title="Link to this heading">#</a></h3>
<p>Se separan las variables numéricas en un vector.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var_num</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;edad&#39;</span><span class="p">,</span> <span class="s1">&#39;altura_cm&#39;</span><span class="p">,</span> <span class="s1">&#39;ingresos&#39;</span><span class="p">,</span> <span class="s1">&#39;gasto_mensual&#39;</span><span class="p">,</span> <span class="s1">&#39;puntuacion_credito&#39;</span><span class="p">,</span> <span class="s1">&#39;demanda&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<section id="knn-numericas">
<h4><em><strong>5.1.1. <code class="docutils literal notranslate"><span class="pre">knn</span> <span class="pre">-</span> <span class="pre">numéricas:</span></code></strong></em><a class="headerlink" href="#knn-numericas" title="Link to this heading">#</a></h4>
<p>Se crea una función que usa un moelo de knn para imputar las variables numéricas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.impute</span><span class="w"> </span><span class="kn">import</span> <span class="n">KNNImputer</span>

<span class="k">def</span><span class="w"> </span><span class="nf">knn_imputacion_numericas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables_numericas</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>

    <span class="n">df_imputado_knn</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># Inicializar el imputador</span>
    <span class="n">imputer</span> <span class="o">=</span> <span class="n">KNNImputer</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="n">k</span><span class="p">)</span>

    <span class="n">df_imputado_knn</span><span class="p">[</span><span class="n">variables_numericas</span><span class="p">]</span> <span class="o">=</span> <span class="n">imputer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_imputado_knn</span><span class="p">[</span><span class="n">variables_numericas</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">df_imputado_knn</span>
</pre></div>
</div>
</div>
</div>
<p>Se crea un dataframe y se imputan las variables numéricas con este método.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado_knn</span> <span class="o">=</span> <span class="n">knn_imputacion_numericas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables_numericas</span><span class="o">=</span><span class="n">var_num</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="regresion">
<h4><em><strong>5.1.2. <code class="docutils literal notranslate"><span class="pre">Regresión</span></code></strong></em><a class="headerlink" href="#regresion" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.experimental</span><span class="w"> </span><span class="kn">import</span> <span class="n">enable_iterative_imputer</span> 
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.impute</span><span class="w"> </span><span class="kn">import</span> <span class="n">IterativeImputer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LinearRegression</span>  
</pre></div>
</div>
</div>
</div>
<p>Se imputan todas las variables numéricascon valores faltantes con el método de regresión.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imputer</span> <span class="o">=</span> <span class="n">IterativeImputer</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">LinearRegression</span><span class="p">(),</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="c1"># Ajustar y transformar solo las columnas seleccionadas</span>
<span class="n">df_imputado_reg</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_imputado_reg</span><span class="p">[</span><span class="n">var_num</span><span class="p">]</span> <span class="o">=</span> <span class="n">imputer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">var_num</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>c:\Users\maria\miniconda\envs\ml_venv\lib\site-packages\sklearn\impute\_iterative.py:895: ConvergenceWarning: [IterativeImputer] Early stopping criterion not reached.
  warnings.warn(
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<p>Pruebas de normalidad para determinar a qué variables se le puede aplicar la media o la mediana.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">shapiro</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">def</span><span class="w"> </span><span class="nf">prueba_normalidad</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnas</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">):</span>
    
    <span class="n">resultados</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="n">datos</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">datos</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">resultados</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span>
                <span class="s1">&#39;p_value&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;es_normal&#39;</span><span class="p">:</span> <span class="s1">&#39;No evaluado (datos insuficientes)&#39;</span>
            <span class="p">})</span>
            <span class="k">continue</span>

        <span class="n">stat</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">datos</span><span class="p">)</span>
        <span class="n">es_normal</span> <span class="o">=</span> <span class="s1">&#39;Sí&#39;</span> <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">alpha</span> <span class="k">else</span> <span class="s1">&#39;No&#39;</span>

        <span class="n">resultados</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span>
            <span class="s1">&#39;p_value&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
            <span class="s1">&#39;es_normal&#39;</span><span class="p">:</span> <span class="n">es_normal</span>
        <span class="p">})</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">normalidad</span> <span class="o">=</span> <span class="n">prueba_normalidad</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">var_num</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalidad</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>             variable  p_value es_normal
0                edad   0.0000        No
1           altura_cm   0.5911        Sí
2            ingresos   0.3245        Sí
3       gasto_mensual   0.6752        Sí
4  puntuacion_credito   0.9405        Sí
5             demanda   0.0000        No
</pre></div>
</div>
</div>
</div>
<p>Note que solo dos variables no tiene una dsitribución normal: edad, demanada. El resto de variables: altura_cm, ingresos, gasto_mensual y  puntuación_credito, si presentan una distribución normal.</p>
</section>
<section id="media">
<h4><em><strong>5.1.3. <code class="docutils literal notranslate"><span class="pre">Media</span></code></strong></em><a class="headerlink" href="#media" title="Link to this heading">#</a></h4>
<p>Según los resultados anteriores de normalidad, se separan las variables que tienen una distribución normal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var_num_nor</span> <span class="o">=</span><span class="p">[</span><span class="s2">&quot;altura_cm&quot;</span><span class="p">,</span> <span class="s2">&quot;ingresos&quot;</span><span class="p">,</span> <span class="s2">&quot;gasto_mensual&quot;</span><span class="p">,</span> <span class="s2">&quot;puntuacion_credito&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Ahora se crea una función que impute por la  media un vector de columnas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">imputacion_media</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnas</span><span class="p">):</span>
    <span class="n">df_imputado_media</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="n">media</span> <span class="o">=</span> <span class="n">df_imputado_media</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">df_imputado_media</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df_imputado_media</span>
</pre></div>
</div>
</div>
</div>
<p>Se imputan las variables selccionadas anteriormente por la media.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado_media</span> <span class="o">=</span> <span class="n">imputacion_media</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">var_num_nor</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\297553588.py:5: FutureWarning: A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method({col: value}, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.


  df_imputado_media[col].fillna(media, inplace=True)
</pre></div>
</div>
</div>
</div>
</section>
<section id="mediana">
<h4><em><strong>5.1.4. <code class="docutils literal notranslate"><span class="pre">Mediana</span></code></strong></em><a class="headerlink" href="#mediana" title="Link to this heading">#</a></h4>
<p>Seleccionamos las variables que no siguen una distribución normal y las agrupamos en un vector.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var_num_no_nor</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;edad&quot;</span><span class="p">,</span> <span class="s2">&quot;demanda&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">imputacion_mediana</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">var_num</span><span class="p">):</span>
    <span class="n">df_imputado_mediana</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">var_num</span><span class="p">:</span>
        <span class="n">mediana</span> <span class="o">=</span> <span class="n">df_imputado_mediana</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
        <span class="n">df_imputado_mediana</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">mediana</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df_imputado_mediana</span>
</pre></div>
</div>
</div>
</div>
<p>Imputamos todoas las variables seleccionadas por la mediana.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado_mediana</span> <span class="o">=</span> <span class="n">imputacion_mediana</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">var_num_no_nor</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\4206236181.py:5: FutureWarning: A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method({col: value}, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.


  df_imputado_mediana[col].fillna(mediana, inplace=True)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\4206236181.py:5: FutureWarning: A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method({col: value}, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.


  df_imputado_mediana[col].fillna(mediana, inplace=True)
</pre></div>
</div>
</div>
</div>
</section>
<section id="graficas-antes-y-despues">
<h4><em><strong>5.1.5. Gráficas antes y después:</strong></em><a class="headerlink" href="#graficas-antes-y-despues" title="Link to this heading">#</a></h4>
<p>Ahora observemos los cambios de cada variable según cada método de imputación aplicado.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="k">def</span><span class="w"> </span><span class="nf">graficos_imputacion_por_variables</span><span class="p">(</span><span class="n">df_original</span><span class="p">,</span> <span class="n">df_imputado</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>

    <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Comparación de </span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2"> antes y después de la imputación&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

        <span class="c1"># Histograma - Antes</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">df_original</span><span class="p">[</span><span class="n">variable</span><span class="p">],</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tomato&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Histograma antes&quot;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>

        <span class="c1"># Histograma - Después</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">df_imputado</span><span class="p">[</span><span class="n">variable</span><span class="p">],</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;steelblue&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Histograma después&quot;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>

        <span class="c1"># Boxplot - Antes</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df_original</span><span class="p">[</span><span class="n">variable</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tomato&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Boxplot antes&quot;</span><span class="p">)</span>

        <span class="c1"># Boxplot - Después</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df_imputado</span><span class="p">[</span><span class="n">variable</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;steelblue&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Boxplot después&quot;</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">])</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<section id="knn">
<h5><em><strong>5.1.5.1. Knn</strong></em><a class="headerlink" href="#knn" title="Link to this heading">#</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficos_imputacion_por_variables</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_knn</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="n">var_num</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/861133302c8999c6ac4db96b9f1f3678e8ec3d7fbc25dcb589107f95d31dd18f.png" src="_images/861133302c8999c6ac4db96b9f1f3678e8ec3d7fbc25dcb589107f95d31dd18f.png" />
<img alt="_images/7b5fac3baf66af072806913eab141faebf71a66e3fbaa24f36a37554317a5b1c.png" src="_images/7b5fac3baf66af072806913eab141faebf71a66e3fbaa24f36a37554317a5b1c.png" />
<img alt="_images/3b6ad931645df296c7c84f15f616b7fa6cf55ae772fef3735a21b3239c150986.png" src="_images/3b6ad931645df296c7c84f15f616b7fa6cf55ae772fef3735a21b3239c150986.png" />
<img alt="_images/9dfb17b9cf8d6c7f56fbe389a79f5ba777ce8597ac79a59a146b5ac235b5fa7a.png" src="_images/9dfb17b9cf8d6c7f56fbe389a79f5ba777ce8597ac79a59a146b5ac235b5fa7a.png" />
<img alt="_images/f79c9e26ff42cf52ac24a00510db06c7787265b99a6bd80f0092bf19b7677c61.png" src="_images/f79c9e26ff42cf52ac24a00510db06c7787265b99a6bd80f0092bf19b7677c61.png" />
<img alt="_images/2ad0239174b3a089df505db4f945137d984d17da39bae0ab0cfa6409bf1e1215.png" src="_images/2ad0239174b3a089df505db4f945137d984d17da39bae0ab0cfa6409bf1e1215.png" />
</div>
</div>
<p>Observe que variables como edad, altura e ingresos conservan a simple vista la disribición original, pero en otras variables como puntuacion_credito parece que la distribución original cambió.</p>
</section>
<section id="id1">
<h5><em><strong>5.1.5.2. Regresión</strong></em><a class="headerlink" href="#id1" title="Link to this heading">#</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficos_imputacion_por_variables</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_reg</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="n">var_num</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/058378c7394c14cf1f27c3eb99df7b73c270a57aec9c54cd1c4519f108f949a9.png" src="_images/058378c7394c14cf1f27c3eb99df7b73c270a57aec9c54cd1c4519f108f949a9.png" />
<img alt="_images/4ba72481b7acf6f9ca1439767acefdd3f160de4c7fd92fd81244ed5056b8cf8a.png" src="_images/4ba72481b7acf6f9ca1439767acefdd3f160de4c7fd92fd81244ed5056b8cf8a.png" />
<img alt="_images/9609aff6a2eb6908dd7c83bcc0f6eb3f3947d8d97caefbe4bf520ed8776d72b8.png" src="_images/9609aff6a2eb6908dd7c83bcc0f6eb3f3947d8d97caefbe4bf520ed8776d72b8.png" />
<img alt="_images/4a38ebfe67eed0d3522ae578d40c59a7b3f294b9f911981c35b512ff31172e00.png" src="_images/4a38ebfe67eed0d3522ae578d40c59a7b3f294b9f911981c35b512ff31172e00.png" />
<img alt="_images/93c49dcd18dfd73a1b32c0bb24d405844a3568629b8fc3d0dcede96bb38d2eab.png" src="_images/93c49dcd18dfd73a1b32c0bb24d405844a3568629b8fc3d0dcede96bb38d2eab.png" />
<img alt="_images/a8f3df80513d399c908dffebcb7cd24a7ffeba9a8685986c543c4134d6306eaf.png" src="_images/a8f3df80513d399c908dffebcb7cd24a7ffeba9a8685986c543c4134d6306eaf.png" />
</div>
</div>
<p>Note que las mayoría de distribuciones se conservaron, pero distribuciones de variables como puntuacion_credito y demanda cambiaron a simple vista.</p>
</section>
<section id="id2">
<h5><em><strong>5.1.5.3. Media</strong></em><a class="headerlink" href="#id2" title="Link to this heading">#</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficos_imputacion_por_variables</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_media</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="n">var_num_nor</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/8f14e45a2c7c0a2198f848ad0b6f810f6db7895c518a8336a39620d32888edb8.png" src="_images/8f14e45a2c7c0a2198f848ad0b6f810f6db7895c518a8336a39620d32888edb8.png" />
<img alt="_images/8f775de01d9c801ee1eaf62c9d172c1862d9447bc3d7bb8d902b8eb9f1438c49.png" src="_images/8f775de01d9c801ee1eaf62c9d172c1862d9447bc3d7bb8d902b8eb9f1438c49.png" />
<img alt="_images/923f60d72fd76d1a9fe835337636f6c517637c123c8caf0550f16742a5e1c1cc.png" src="_images/923f60d72fd76d1a9fe835337636f6c517637c123c8caf0550f16742a5e1c1cc.png" />
<img alt="_images/da91fb6c5fd3a1a8f13690ba3f4a40c9f2ab3dc0467969e07752525a9a7c2592.png" src="_images/da91fb6c5fd3a1a8f13690ba3f4a40c9f2ab3dc0467969e07752525a9a7c2592.png" />
</div>
</div>
<p>Observe que ninguna distribución se mantuvo, pues la mayoría de datos se cententraron en la media, alterando toda la distribución y creando muchos datos extremos.</p>
</section>
<section id="id3">
<h5><em><strong>5.1.5.4. Mediana</strong></em><a class="headerlink" href="#id3" title="Link to this heading">#</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficos_imputacion_por_variables</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_mediana</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="n">var_num_no_nor</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9e043a0432f7e20ce93b88cd28dbba1e9d62c4b60580da0afd08268f97a71822.png" src="_images/9e043a0432f7e20ce93b88cd28dbba1e9d62c4b60580da0afd08268f97a71822.png" />
<img alt="_images/f9db9d82b9862c91ac05fcdce0b91708e211d60e26e4cb7891e2795a7e80894c.png" src="_images/f9db9d82b9862c91ac05fcdce0b91708e211d60e26e4cb7891e2795a7e80894c.png" />
</div>
</div>
<p>Ocurre una situacion similar como con la  imputación por la media, pues los datos se concentran en la mitad de los datos y alteran la distribución.</p>
</section>
</section>
</section>
<section id="variables-categoricas">
<h3><em><strong>5.2. Variables categóricas</strong></em><a class="headerlink" href="#variables-categoricas" title="Link to this heading">#</a></h3>
<p>Ahora separamos las variables categóricas con datso faltantes del dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vars_cat</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sexo&#39;</span><span class="p">,</span> <span class="s1">&#39;ciudad&#39;</span><span class="p">,</span> <span class="s1">&#39;nivel_educativo&#39;</span><span class="p">,</span> <span class="s1">&#39;estado_civil&#39;</span><span class="p">,</span> <span class="s1">&#39;segmento&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>En primer lugar, se crea una función por cada método de imputación que rellene los Nan de un vector con las columnas categóricas que tienen Nan en el dataframe.</p>
<section id="knn-categoricas">
<h4><em><strong>5.2.1. <code class="docutils literal notranslate"><span class="pre">knn</span> <span class="pre">-</span> <span class="pre">categóricas:</span></code></strong></em><a class="headerlink" href="#knn-categoricas" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.impute</span><span class="w"> </span><span class="kn">import</span> <span class="n">KNNImputer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">OrdinalEncoder</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">knn_imputacion_categoricas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables_categoricas</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>

    <span class="n">df_imputado_knn_cat</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>


    <span class="c1"># Codificar todas las variables categóricas (incluyendo los NaN)</span>
    <span class="n">encoder</span> <span class="o">=</span> <span class="n">OrdinalEncoder</span><span class="p">(</span><span class="n">handle_unknown</span><span class="o">=</span><span class="s1">&#39;use_encoded_value&#39;</span><span class="p">,</span> <span class="n">unknown_value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
    <span class="n">df_encoded</span> <span class="o">=</span> <span class="n">df_imputado_knn_cat</span><span class="p">[</span><span class="n">variables_categoricas</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">df_encoded</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">encoder</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_encoded</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">variables_categoricas</span><span class="p">)</span>

    <span class="c1"># Aplicar KNN Imputer</span>
    <span class="n">imputer</span> <span class="o">=</span> <span class="n">KNNImputer</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="n">k</span><span class="p">)</span>
    <span class="n">df_imputed_array</span> <span class="o">=</span> <span class="n">imputer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_encoded</span><span class="p">)</span>

    <span class="c1"># Redondear e invertir la codificación</span>
    <span class="n">df_imputed_encoded</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">df_imputed_array</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">variables_categoricas</span><span class="p">)</span>
    <span class="n">df_decoded</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">encoder</span><span class="o">.</span><span class="n">inverse_transform</span><span class="p">(</span><span class="n">df_imputed_encoded</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">variables_categoricas</span><span class="p">)</span>

    <span class="c1"># Reemplazar en el DataFrame original</span>
    <span class="n">df_imputado_knn_cat</span><span class="p">[</span><span class="n">variables_categoricas</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_decoded</span>

    <span class="k">return</span> <span class="n">df_imputado_knn_cat</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Aplicar imputación KNN</span>
<span class="n">df_imputado_knn_cat</span> <span class="o">=</span> <span class="n">knn_imputacion_categoricas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">variables_categoricas</span><span class="o">=</span><span class="n">vars_cat</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="hot-deck">
<h4><em><strong>5.2.2.<code class="docutils literal notranslate"><span class="pre">hot-deck:</span></code></strong></em><a class="headerlink" href="#hot-deck" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">imputacion_hot_deck</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnas_cat</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
 
    <span class="n">df_imputado_hd</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas_cat</span><span class="p">:</span>
        <span class="c1"># Valores observados no nulos</span>
        <span class="n">valores_observados</span> <span class="o">=</span> <span class="n">df_imputado_hd</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>

        <span class="c1"># Si no hay valores válidos, se salta la columna</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">valores_observados</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No se puede imputar &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39; por hot-deck (no hay valores observados).&quot;</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="c1"># Índices con nulos</span>
        <span class="n">nulos_idx</span> <span class="o">=</span> <span class="n">df_imputado_hd</span><span class="p">[</span><span class="n">df_imputado_hd</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span><span class="o">.</span><span class="n">index</span>

        <span class="c1"># Imputar con selección aleatoria</span>
        <span class="n">imputaciones</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="n">random_state</span><span class="p">)</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
            <span class="n">valores_observados</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">nulos_idx</span><span class="p">),</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">df_imputado_hd</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">nulos_idx</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">imputaciones</span>

    <span class="k">return</span> <span class="n">df_imputado_hd</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado_hd</span> <span class="o">=</span> <span class="n">imputacion_hot_deck</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnas_cat</span><span class="o">=</span><span class="n">vars_cat</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="moda">
<h4><em><strong>5.2.3. <code class="docutils literal notranslate"><span class="pre">moda</span></code></strong></em><a class="headerlink" href="#moda" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">def</span><span class="w"> </span><span class="nf">imputacion_moda</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnas_cat</span><span class="p">):</span>
 
    <span class="n">df_imputado_moda</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas_cat</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">df_imputado_moda</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">moda</span> <span class="o">=</span> <span class="n">df_imputado_moda</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">df_imputado_moda</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">moda</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">df_imputado_moda</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado_moda</span> <span class="o">=</span> <span class="n">imputacion_moda</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnas_cat</span><span class="o">=</span><span class="n">vars_cat</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\2907166401.py:10: FutureWarning: A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method({col: value}, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.


  df_imputado_moda[col].fillna(moda, inplace=True)
</pre></div>
</div>
</div>
</div>
</section>
<section id="grafico-de-barras">
<h4><em><strong>5.2.4. <code class="docutils literal notranslate"><span class="pre">Gráfico</span> <span class="pre">de</span> <span class="pre">barras:</span></code></strong></em><a class="headerlink" href="#grafico-de-barras" title="Link to this heading">#</a></h4>
<p>Ahora se graficará cada variable categórica para comparar la distristribución original con la distribución que queda después de imputar.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">def</span><span class="w"> </span><span class="nf">comparar_barras_imputacion_multiples</span><span class="p">(</span><span class="n">df_original</span><span class="p">,</span> <span class="n">df_imputado</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>

    <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
        <span class="c1"># Calcular proporciones</span>
        <span class="n">antes</span> <span class="o">=</span> <span class="n">df_original</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="n">despues</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>

        <span class="c1"># Preparar DataFrames</span>
        <span class="n">df_antes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">variable</span><span class="p">:</span> <span class="n">antes</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;proporcion&#39;</span><span class="p">:</span> <span class="n">antes</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>
        <span class="n">df_despues</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">variable</span><span class="p">:</span> <span class="n">despues</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;proporcion&#39;</span><span class="p">:</span> <span class="n">despues</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>

        <span class="c1"># Crear figura</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Distribución de </span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s1"> antes y después de la imputación&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

        <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_antes</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">variable</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;proporcion&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;Reds&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Antes de imputar&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df_despues</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">variable</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;proporcion&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Después de imputar&#39;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">])</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<section id="id4">
<h5><strong>5.2.4.1. <code class="docutils literal notranslate"><span class="pre">knn:</span></code></strong><a class="headerlink" href="#id4" title="Link to this heading">#</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comparar_barras_imputacion_multiples</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_knn_cat</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="n">vars_cat</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/30ccf898dbbb39412ad857e85f118410eb40bbc35d4f54a41e94093d5b01c93f.png" src="_images/30ccf898dbbb39412ad857e85f118410eb40bbc35d4f54a41e94093d5b01c93f.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/7a190050ab55fd0d8bae0b1214a43f8f6ab55040d5b842840e3a615be7c3d995.png" src="_images/7a190050ab55fd0d8bae0b1214a43f8f6ab55040d5b842840e3a615be7c3d995.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/b26903e8c501b09a6b174ca8b9c8d4c7832ac86987c81eb8c27c3a2853897b8f.png" src="_images/b26903e8c501b09a6b174ca8b9c8d4c7832ac86987c81eb8c27c3a2853897b8f.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/0261b7ccc494ab6822e879f27a6a6dc1c2a45a8b506c3e6d0c43a2a241e6743c.png" src="_images/0261b7ccc494ab6822e879f27a6a6dc1c2a45a8b506c3e6d0c43a2a241e6743c.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/010a0744d5c7575c7f665f63c81ce4535851ce879d0a9bc6ccc9a86da171188e.png" src="_images/010a0744d5c7575c7f665f63c81ce4535851ce879d0a9bc6ccc9a86da171188e.png" />
</div>
</div>
<p>Podemos ver que las dsitribuciones de algunas variables como ciudad, sexo y segmento se mantuvieron con la jerarquía de las categorías con mayor frecuencia. Pero en variables como nivel_educativo y estado civil, categorías como técnnico y divorciado/a (en cada respectiva variable) presentan una frecuencia no proporcional o congruente con la distribución antes de imputar, lo queu puede estar alterando la distribución original.</p>
</section>
<section id="id5">
<h5><strong>5.2.4.2. <code class="docutils literal notranslate"><span class="pre">hot-deck:</span></code></strong><a class="headerlink" href="#id5" title="Link to this heading">#</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comparar_barras_imputacion_multiples</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_hd</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="n">vars_cat</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/2fc7f6963edc3d9d35ee1f985f0a0e9fc7e0d84875253df6cb2e99474df36a06.png" src="_images/2fc7f6963edc3d9d35ee1f985f0a0e9fc7e0d84875253df6cb2e99474df36a06.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/fafd4489ab2ba5eeac2c7750f8d3186019cb13cad128457035b7d0428751e533.png" src="_images/fafd4489ab2ba5eeac2c7750f8d3186019cb13cad128457035b7d0428751e533.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/760f12f976338eb7b2e3d02788d419aaa1a5705521dd73c9304b9d8042beb215.png" src="_images/760f12f976338eb7b2e3d02788d419aaa1a5705521dd73c9304b9d8042beb215.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/81bd676026cc546b62bd8ef7af620bca2b6a47649eb44f7b5f34ee0acaea8330.png" src="_images/81bd676026cc546b62bd8ef7af620bca2b6a47649eb44f7b5f34ee0acaea8330.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/d9162867c609297ad765ff05c298f582d5b33daa4a9d185cc1ac28e7d0d2bbd0.png" src="_images/d9162867c609297ad765ff05c298f582d5b33daa4a9d185cc1ac28e7d0d2bbd0.png" />
</div>
</div>
<p>El método de imputación <strong>hot deck</strong> resultó adecuado para estas variables categóricas, pues mantuvo la distribución original sin generar cambios drásticos en las proporciones. En sexo, ciudad y nivel educativo las frecuencias se conservaron estables, mientras que en estado civil hubo ligeras variaciones pero sin alterar la tendencia general. En conjunto, el método preserva la estructura de los datos y asigna valores coherentes, mostrando un buen desempeño en este caso.</p>
</section>
<section id="id6">
<h5><strong>5.2.4.3. <code class="docutils literal notranslate"><span class="pre">moda:</span></code></strong><a class="headerlink" href="#id6" title="Link to this heading">#</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comparar_barras_imputacion_multiples</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_moda</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="n">vars_cat</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/ad00b99fb21168986758c41c8b4d9e34b32f25f7781da7699c734801fb1b591f.png" src="_images/ad00b99fb21168986758c41c8b4d9e34b32f25f7781da7699c734801fb1b591f.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/18663ef33ba2f2c6e06a588d8de96512c29a9f365d9302418ddaf74185537ec3.png" src="_images/18663ef33ba2f2c6e06a588d8de96512c29a9f365d9302418ddaf74185537ec3.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/2f41c8eebfba50dc0bdc714b69ad07a6e5a530e8da46f69cb45cafabe920bc16.png" src="_images/2f41c8eebfba50dc0bdc714b69ad07a6e5a530e8da46f69cb45cafabe920bc16.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/c712531f15fa117f3857c19dd2e385988d0888dd4966b9e50514e92463d8bb32.png" src="_images/c712531f15fa117f3857c19dd2e385988d0888dd4966b9e50514e92463d8bb32.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_antes, x=variable, y=&#39;proporcion&#39;, ax=axes[0], palette=&#39;Reds&#39;)
C:\Users\maria\AppData\Local\Temp\ipykernel_18272\1615217484.py:24: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(data=df_despues, x=variable, y=&#39;proporcion&#39;, ax=axes[1], palette=&#39;Blues&#39;)
</pre></div>
</div>
<img alt="_images/5c4f5e80090adacd339df63fcb0cdcdeef3f02db87029590532b95914b23c89b.png" src="_images/5c4f5e80090adacd339df63fcb0cdcdeef3f02db87029590532b95914b23c89b.png" />
</div>
</div>
<p>Las gráficas muestran que el método de imputación por la moda tiende a mantener la distribución original cuando hay una categoría claramente dominante, como en las variables <em>sexo</em> o <em>nivel_educativo</em>, donde los cambios después de imputar son mínimos. Sin embargo, en variables con mayor dispersión o sin una moda muy marcada, como <em>estado_civil</em> o <em>ciudad</em>, se observa un aumento considerable en la categoría más frecuente, lo que altera la distribución original. Esto indica que el método puede ser útil para completar datos faltantes sin generar grandes distorsiones en variables con una moda clara, pero en otros casos puede introducir sesgos al sobrerrepresentar la categoría más común.</p>
</section>
</section>
</section>
</section>
<section id="evaluacion-de-la-imputacion">
<h2><em><strong>6. Evaluación de la imputación</strong></em><a class="headerlink" href="#evaluacion-de-la-imputacion" title="Link to this heading">#</a></h2>
<section id="pruebas-de-normalidad">
<h3><em><strong>6.1. Pruebas de normalidad</strong></em><a class="headerlink" href="#pruebas-de-normalidad" title="Link to this heading">#</a></h3>
<p>En primer lugar, veamos la distribución original de cada variables según la distribución normal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">normalidad_antes</span> <span class="o">=</span> <span class="n">prueba_normalidad</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">var_num</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalidad_antes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>             variable  p_value es_normal
0                edad   0.0000        No
1           altura_cm   0.5911        Sí
2            ingresos   0.3245        Sí
3       gasto_mensual   0.6752        Sí
4  puntuacion_credito   0.9405        Sí
5             demanda   0.0000        No
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">normalidad_knn</span> <span class="o">=</span> <span class="n">prueba_normalidad</span><span class="p">(</span><span class="n">df_imputado_knn</span><span class="p">,</span> <span class="n">var_num</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalidad_knn</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>             variable  p_value es_normal
0                edad   0.0000        No
1           altura_cm   0.5023        Sí
2            ingresos   0.0976        Sí
3       gasto_mensual   0.0004        No
4  puntuacion_credito   0.0000        No
5             demanda   0.0000        No
</pre></div>
</div>
</div>
</div>
<p>Los resultados muestran que al imputar las varibles numéricas por knn, modifica el tipo de distribucióna a la que se ajustan ciertas variables. Podemos notar que La variable gasto mensual y  puntuacion_credito ya no se ajustan a una distribución normal, pero originalmente si, es decir, las distribuciones de las variables gastos_mensuales y puntuacion_credito después de la imputación, son diferentes a la original.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">normalidad_reg</span> <span class="o">=</span> <span class="n">prueba_normalidad</span><span class="p">(</span><span class="n">df_imputado_reg</span><span class="p">,</span> <span class="n">var_num</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalidad_reg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>             variable  p_value es_normal
0                edad   0.0000        No
1           altura_cm   0.0226        No
2            ingresos   0.1464        Sí
3       gasto_mensual   0.1871        Sí
4  puntuacion_credito   0.0000        No
5             demanda   0.0001        No
</pre></div>
</div>
</div>
</div>
<p>Aquí podemos observar que este método modifica la distribución de variables como altura_cm y puntuacion_credito, pues originalmente estas varibales sí se ajustan a una distribución normal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">normalidad_media</span> <span class="o">=</span> <span class="n">prueba_normalidad</span><span class="p">(</span><span class="n">df_imputado_media</span><span class="p">,</span> <span class="n">var_num_nor</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalidad_media</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>             variable  p_value es_normal
0           altura_cm   0.0045        No
1            ingresos   0.0000        No
2       gasto_mensual   0.0000        No
3  puntuacion_credito   0.0000        No
</pre></div>
</div>
</div>
</div>
<p>Note que al imputar las variables por la media esto modifica las distribuciones originales de las variables, pues originalmente estas se ajustaban a una distribución normal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">normalidad_mediana</span> <span class="o">=</span> <span class="n">prueba_normalidad</span><span class="p">(</span><span class="n">df_imputado_mediana</span><span class="p">,</span> <span class="n">var_num_no_nor</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalidad_mediana</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  variable  p_value es_normal
0     edad      0.0        No
1  demanda      0.0        No
</pre></div>
</div>
</div>
</div>
<p>Observe que en este caso las variables conservaron el hecho de que la distribución no se ajusta  ala normal.</p>
</section>
<section id="pruebas-de-igualdad-de-distribuciones">
<h3><em><strong>6.2. Pruebas de igualdad de distribuciones</strong></em><a class="headerlink" href="#pruebas-de-igualdad-de-distribuciones" title="Link to this heading">#</a></h3>
<section id="id7">
<h4><em><strong>6.2.1. Variables numéricas</strong></em><a class="headerlink" href="#id7" title="Link to this heading">#</a></h4>
<p>En esta sección se analiza si la distribución de las variables numéricas con Nan cambia después de imputar, usando los diferentes métodos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">ks_2samp</span>

<span class="k">def</span><span class="w"> </span><span class="nf">comparar_distribuciones_ks</span><span class="p">(</span><span class="n">original</span><span class="p">,</span> <span class="n">imputado</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">):</span>
    <span class="n">resultados</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
        <span class="c1"># Eliminar NaN de la muestra original</span>
        <span class="n">datos_original</span> <span class="o">=</span> <span class="n">original</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">datos_imputado</span> <span class="o">=</span> <span class="n">imputado</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span>

        <span class="c1"># Prueba de Kolmogorov-Smirnov</span>
        <span class="n">estadistico</span><span class="p">,</span> <span class="n">p_valor</span> <span class="o">=</span> <span class="n">ks_2samp</span><span class="p">(</span><span class="n">datos_original</span><span class="p">,</span> <span class="n">datos_imputado</span><span class="p">)</span>

        <span class="n">conclusion</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;Las distribuciones son IGUALES (no se rechaza H₀)&quot;</span>
            <span class="k">if</span> <span class="n">p_valor</span> <span class="o">&gt;</span> <span class="n">alpha</span>
            <span class="k">else</span> <span class="s2">&quot;Las distribuciones son DIFERENTES (se rechaza H₀)&quot;</span>
        <span class="p">)</span>

        <span class="n">resultados</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="n">variable</span><span class="p">,</span>
            <span class="s2">&quot;estadístico_ks&quot;</span><span class="p">:</span> <span class="n">estadistico</span><span class="p">,</span>
            <span class="s2">&quot;p_valor&quot;</span><span class="p">:</span> <span class="n">p_valor</span><span class="p">,</span>
            <span class="s2">&quot;conclusion&quot;</span><span class="p">:</span> <span class="n">conclusion</span>
        <span class="p">})</span>

    <span class="k">return</span> <span class="n">resultados</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_knn</span> <span class="o">=</span> <span class="n">comparar_distribuciones_ks</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_knn</span><span class="p">,</span> <span class="n">var_num</span><span class="p">)</span>

<span class="k">for</span> <span class="n">resultado</span> <span class="ow">in</span> <span class="n">resultados_knn</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">resultado</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;variable&#39;: &#39;edad&#39;, &#39;estadístico_ks&#39;: np.float64(0.00902061855670103), &#39;p_valor&#39;: np.float64(0.9999999999912338), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;altura_cm&#39;, &#39;estadístico_ks&#39;: np.float64(0.018869565217391304), &#39;p_valor&#39;: np.float64(0.9940674980889341), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;ingresos&#39;, &#39;estadístico_ks&#39;: np.float64(0.024772727272727273), &#39;p_valor&#39;: np.float64(0.9272466479036574), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;gasto_mensual&#39;, &#39;estadístico_ks&#39;: np.float64(0.058), &#39;p_valor&#39;: np.float64(0.10813622162433434), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;puntuacion_credito&#39;, &#39;estadístico_ks&#39;: np.float64(0.193), &#39;p_valor&#39;: np.float64(2.723873049184675e-11), &#39;conclusion&#39;: &#39;Las distribuciones son DIFERENTES (se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;demanda&#39;, &#39;estadístico_ks&#39;: np.float64(0.04352941176470588), &#39;p_valor&#39;: np.float64(0.336684726136264), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
</pre></div>
</div>
</div>
</div>
<p>Los resultados del test de Kolmogorov-Smirnov comparan las distribuciones originales (<code class="docutils literal notranslate"><span class="pre">df</span></code>) con las del DataFrame imputado (<code class="docutils literal notranslate"><span class="pre">df_imputado_knn</span></code>) para variables numéricas. Los valores p obtenidos para casi todas las variables (como edad, altura, ingresos, gasto mensual y demanda) son suficientemente altos como para no rechazar la hipótesis nula, lo que indica que las distribuciones originales y las imputadas por KNN son estadísticamente iguales. Esto sugiere que el método de imputación KNN conservó bastante bien la estructura original de los datos. No obstante, en el caso de <em>puntuación_credito</em>, el valor p es extremadamente bajo, lo que implica que la imputación sí alteró significativamente su distribución. Por lo tanto, aunque KNN parece ser un buen método para imputar la mayoría de las variables numéricas, podría no ser el más adecuado para <em>puntuación_credito</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_reg</span> <span class="o">=</span> <span class="n">comparar_distribuciones_ks</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_reg</span><span class="p">,</span> <span class="n">var_num</span><span class="p">)</span>

<span class="k">for</span> <span class="n">resultado</span> <span class="ow">in</span> <span class="n">resultados_reg</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">resultado</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;variable&#39;: &#39;edad&#39;, &#39;estadístico_ks&#39;: np.float64(0.008670103092783505), &#39;p_valor&#39;: np.float64(0.9999999999990001), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;altura_cm&#39;, &#39;estadístico_ks&#39;: np.float64(0.03391304347826087), &#39;p_valor&#39;: np.float64(0.6237628733462636), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;ingresos&#39;, &#39;estadístico_ks&#39;: np.float64(0.009909090909090909), &#39;p_valor&#39;: np.float64(0.9999999997811465), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;gasto_mensual&#39;, &#39;estadístico_ks&#39;: np.float64(0.048666666666666664), &#39;p_valor&#39;: np.float64(0.2548309955863561), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;puntuacion_credito&#39;, &#39;estadístico_ks&#39;: np.float64(0.165), &#39;p_valor&#39;: np.float64(2.349515455441309e-08), &#39;conclusion&#39;: &#39;Las distribuciones son DIFERENTES (se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;demanda&#39;, &#39;estadístico_ks&#39;: np.float64(0.05858823529411765), &#39;p_valor&#39;: np.float64(0.08127668847353747), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
</pre></div>
</div>
</div>
</div>
<p>Los resultados del test de Kolmogorov-Smirnov muestran que, tras la imputación por regresión, las distribuciones de la mayoría de las variables numéricas (edad, altura, ingresos, gasto mensual y demanda) no presentan diferencias significativas respecto a los datos originales, ya que los valores p son altos y no se rechaza la hipótesis nula. Esto indica que el proceso de imputación logró mantener la forma de las distribuciones originales en esos casos. Sin embargo, en la variable <em>puntuacion_credito</em> se observa una diferencia estadísticamente significativa entre la distribución original y la imputada (valor p muy bajo), lo que sugiere que la regresión alteró sustancialmente esa variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_media</span> <span class="o">=</span> <span class="n">comparar_distribuciones_ks</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_media</span><span class="p">,</span> <span class="n">var_num_nor</span><span class="p">)</span>

<span class="k">for</span> <span class="n">resultado</span> <span class="ow">in</span> <span class="n">resultados_media</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">resultado</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;variable&#39;: &#39;altura_cm&#39;, &#39;estadístico_ks&#39;: np.float64(0.04017391304347826), &#39;p_valor&#39;: np.float64(0.4079486277585289), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;ingresos&#39;, &#39;estadístico_ks&#39;: np.float64(0.06027272727272727), &#39;p_valor&#39;: np.float64(0.06334067759356184), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;gasto_mensual&#39;, &#39;estadístico_ks&#39;: np.float64(0.127), &#39;p_valor&#39;: np.float64(1.7855545182171186e-06), &#39;conclusion&#39;: &#39;Las distribuciones son DIFERENTES (se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;puntuacion_credito&#39;, &#39;estadístico_ks&#39;: np.float64(0.252), &#39;p_valor&#39;: np.float64(4.975721961137611e-19), &#39;conclusion&#39;: &#39;Las distribuciones son DIFERENTES (se rechaza H₀)&#39;}
</pre></div>
</div>
</div>
</div>
<p>Al comparar las distribuciones originales con las obtenidas tras imputar por la media en variables con distribución aproximadamente normal, se observa que <em>altura_cm</em> e <em>ingresos</em> mantienen distribuciones similares, ya que los valores p del test de Kolmogorov-Smirnov son suficientemente altos y no se rechaza la hipótesis nula. Esto sugiere que imputar con la media no alteró significativamente su forma. Sin embargo, en las variables <em>gasto_mensual</em> y especialmente <em>puntuacion_credito</em>, los resultados muestran diferencias estadísticamente significativas con valores p muy bajos, lo que indica que la imputación con la media sí distorsionó sus distribuciones originales. Esto puede deberse a que, aunque sean variables numéricas, su distribución real no es perfectamente normal o la media no es representativa en presencia de asimetría o outliers. En conclusión, imputar con la media puede funcionar razonablemente bien en algunos casos, pero no garantiza preservar la distribución original en todos los contextos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_mediana</span> <span class="o">=</span> <span class="n">comparar_distribuciones_ks</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_mediana</span><span class="p">,</span> <span class="n">var_num_no_nor</span><span class="p">)</span>

<span class="k">for</span> <span class="n">resultado</span> <span class="ow">in</span> <span class="n">resultados_mediana</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">resultado</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;variable&#39;: &#39;edad&#39;, &#39;estadístico_ks&#39;: np.float64(0.014783505154639175), &#39;p_valor&#39;: np.float64(0.9998473755734092), &#39;conclusion&#39;: &#39;Las distribuciones son IGUALES (no se rechaza H₀)&#39;}
{&#39;variable&#39;: &#39;demanda&#39;, &#39;estadístico_ks&#39;: np.float64(0.075), &#39;p_valor&#39;: np.float64(0.010672931214352237), &#39;conclusion&#39;: &#39;Las distribuciones son DIFERENTES (se rechaza H₀)&#39;}
</pre></div>
</div>
</div>
</div>
<p>Al aplicar la prueba de Kolmogorov-Smirnov para comparar las distribuciones originales con las distribuciones después de imputar los valores faltantes utilizando la mediana, se observaron dos resultados diferentes. En el caso de la variable <strong>edad</strong>, el estadístico KS fue muy bajo (0.0148) y el p-valor extremadamente alto (0.9998), lo que indica que no hay una diferencia significativa entre ambas distribuciones, por lo tanto, se concluye que imputar con la mediana no afectó la forma de la distribución de esta variable. En cambio, para la variable <strong>demanda</strong>, el estadístico KS fue mayor (0.075) y el p-valor bastante bajo (0.0106), lo que sugiere que sí hubo una diferencia significativa entre las distribuciones antes y después de imputar, lo que lleva a rechazar la hipótesis nula. Esto significa que imputar la mediana en la variable demanda sí altera su distribución.</p>
</section>
<section id="id8">
<h4><em><strong>6.2.2. Variables categóricas</strong></em><a class="headerlink" href="#id8" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">chi2_contingency</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">def</span><span class="w"> </span><span class="nf">comparar_distribuciones_categoricas</span><span class="p">(</span><span class="n">original</span><span class="p">,</span> <span class="n">imputado</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">):</span>
    <span class="n">resultados</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
        <span class="c1"># Eliminar NaNs de la muestra original</span>
        <span class="n">datos_original</span> <span class="o">=</span> <span class="n">original</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">datos_imputado</span> <span class="o">=</span> <span class="n">imputado</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span>

        <span class="c1"># Crear tabla de contingencia (frecuencias absolutas por categoría)</span>
        <span class="n">tabla</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span>
            <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;original&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">datos_original</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;imputado&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">datos_imputado</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;fuente&#39;</span><span class="p">),</span>
            <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">datos_original</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">+</span> <span class="n">datos_imputado</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="n">variable</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Aplicar prueba chi-cuadrado</span>
        <span class="n">chi2</span><span class="p">,</span> <span class="n">p_valor</span><span class="p">,</span> <span class="n">dof</span><span class="p">,</span> <span class="n">esperado</span> <span class="o">=</span> <span class="n">chi2_contingency</span><span class="p">(</span><span class="n">tabla</span><span class="p">)</span>

        <span class="n">conclusion</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;Las distribuciones son IGUALES (no se rechaza H₀)&quot;</span>
            <span class="k">if</span> <span class="n">p_valor</span> <span class="o">&gt;</span> <span class="n">alpha</span>
            <span class="k">else</span> <span class="s2">&quot;Las distribuciones son DIFERENTES (se rechaza H₀)&quot;</span>
        <span class="p">)</span>

        <span class="n">resultados</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="n">variable</span><span class="p">,</span>
            <span class="s2">&quot;estadístico_chi2&quot;</span><span class="p">:</span> <span class="n">chi2</span><span class="p">,</span>
            <span class="s2">&quot;p_valor&quot;</span><span class="p">:</span> <span class="n">p_valor</span><span class="p">,</span>
            <span class="s2">&quot;grados_de_libertad&quot;</span><span class="p">:</span> <span class="n">dof</span><span class="p">,</span>
            <span class="s2">&quot;conclusion&quot;</span><span class="p">:</span> <span class="n">conclusion</span>
        <span class="p">})</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_cat_knn</span> <span class="o">=</span> <span class="n">comparar_distribuciones_categoricas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_knn_cat</span><span class="p">,</span> <span class="n">vars_cat</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">resultados_cat_knn</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>          variable  estadístico_chi2       p_valor  grados_de_libertad  \
0             sexo          0.023223  8.788797e-01                   1   
1           ciudad          1.889482  7.560769e-01                   4   
2  nivel_educativo          4.461802  2.157228e-01                   3   
3     estado_civil         94.774846  2.063965e-20                   3   
4         segmento          8.272882  1.597962e-02                   2   

                                          conclusion  
0  Las distribuciones son IGUALES (no se rechaza H₀)  
1  Las distribuciones son IGUALES (no se rechaza H₀)  
2  Las distribuciones son IGUALES (no se rechaza H₀)  
3  Las distribuciones son DIFERENTES (se rechaza H₀)  
4  Las distribuciones son DIFERENTES (se rechaza H₀)  
</pre></div>
</div>
</div>
</div>
<p>Al comparar las distribuciones originales con las distribuciones tras imputar los valores faltantes usando el método KNN en variables categóricas, se aplicó la prueba de chi-cuadrado para evaluar si hubo cambios significativos. Los resultados muestran que para las variables <strong>sexo</strong>, <strong>ciudad</strong> y <strong>nivel_educativo</strong>, los p-valores fueron suficientemente altos, lo que indica que no hay evidencia para afirmar que sus distribuciones hayan cambiado luego de la imputación; por lo tanto, se concluye que se mantienen iguales. En contraste, las variables <strong>estado_civil</strong> y <strong>segmento</strong> presentaron p-valores muy bajos, especialmente estado_civil, cuyo valor es prácticamente cero. Esto indica que estas dos variables sí presentan diferencias estadísticamente significativas entre la distribución original y la imputada, lo cual sugiere que el método KNN podría estar introduciendo sesgo en ellas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_cat_hd</span> <span class="o">=</span> <span class="n">comparar_distribuciones_categoricas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_hd</span><span class="p">,</span> <span class="n">vars_cat</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">resultados_cat_hd</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>          variable  estadístico_chi2   p_valor  grados_de_libertad  \
0             sexo          0.000626  0.980047                   1   
1           ciudad          0.069776  0.999405                   4   
2  nivel_educativo          0.069416  0.995236                   3   
3     estado_civil          1.771651  0.621123                   3   
4         segmento          0.101595  0.950471                   2   

                                          conclusion  
0  Las distribuciones son IGUALES (no se rechaza H₀)  
1  Las distribuciones son IGUALES (no se rechaza H₀)  
2  Las distribuciones son IGUALES (no se rechaza H₀)  
3  Las distribuciones son IGUALES (no se rechaza H₀)  
4  Las distribuciones son IGUALES (no se rechaza H₀)  
</pre></div>
</div>
</div>
</div>
<p>Luego de aplicar la técnica de imputación <em>Hot Deck</em> para completar los valores faltantes en las variables categóricas, se utilizó la prueba chi-cuadrado para comparar las distribuciones originales con las imputadas. Los resultados muestran que para todas las variables analizadas (<strong>sexo</strong>, <strong>ciudad</strong>, <strong>nivel_educativo</strong>, <strong>estado_civil</strong> y <strong>segmento</strong>) los p-valores son muy altos, todos por encima de 0.6 y la mayoría cercanos a 1, lo que indica que no hay evidencia estadística para afirmar que las distribuciones hayan cambiado. En otras palabras, no se rechaza la hipótesis nula en ninguno de los casos, lo cual sugiere que el método <em>Hot Deck</em> conservó muy bien la estructura original de los datos categóricos y no introdujo diferencias significativas en las distribuciones.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_cat_moda</span> <span class="o">=</span> <span class="n">comparar_distribuciones_categoricas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_moda</span><span class="p">,</span> <span class="n">vars_cat</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">resultados_cat_moda</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>          variable  estadístico_chi2       p_valor  grados_de_libertad  \
0             sexo          0.140932  7.073557e-01                   1   
1           ciudad          2.484643  6.473879e-01                   4   
2  nivel_educativo          8.384045  3.870693e-02                   3   
3     estado_civil         60.186104  5.363963e-13                   3   
4         segmento         13.855476  9.802157e-04                   2   

                                          conclusion  
0  Las distribuciones son IGUALES (no se rechaza H₀)  
1  Las distribuciones son IGUALES (no se rechaza H₀)  
2  Las distribuciones son DIFERENTES (se rechaza H₀)  
3  Las distribuciones son DIFERENTES (se rechaza H₀)  
4  Las distribuciones son DIFERENTES (se rechaza H₀)  
</pre></div>
</div>
</div>
</div>
<p>Después de imputar los valores faltantes en variables categóricas usando el método de la moda, se aplicó la prueba chi-cuadrado para comparar si las distribuciones resultantes seguían siendo similares a las originales. Los resultados muestran que para las variables <strong>sexo</strong> y <strong>ciudad</strong>, los p-valores son altos, lo que indica que las distribuciones no cambiaron significativamente tras la imputación y, por tanto, no se rechaza la hipótesis nula. Sin embargo, en las variables <strong>nivel_educativo</strong>, <strong>estado_civil</strong> y <strong>segmento</strong>, los p-valores son muy bajos (especialmente en estado_civil), lo que significa que hay diferencias estadísticamente significativas entre las distribuciones originales y las imputadas.</p>
</section>
</section>
<section id="comparacion-de-medias-o-rangos">
<h3><em><strong>6.3. Comparación de medias o rangos</strong></em><a class="headerlink" href="#comparacion-de-medias-o-rangos" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">ttest_ind</span><span class="p">,</span> <span class="n">mannwhitneyu</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">def</span><span class="w"> </span><span class="nf">comparar_distribuciones_numericas</span><span class="p">(</span><span class="n">original</span><span class="p">,</span> <span class="n">imputado</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">metodo</span><span class="o">=</span><span class="s1">&#39;t-test&#39;</span><span class="p">):</span>
    <span class="n">resultados</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
        <span class="c1"># Eliminar NaNs de la muestra original</span>
        <span class="n">datos_original</span> <span class="o">=</span> <span class="n">original</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="n">datos_imputado</span> <span class="o">=</span> <span class="n">imputado</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="c1"># Asegurar que hay suficientes datos</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">datos_original</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">datos_imputado</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">resultados</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="n">variable</span><span class="p">,</span>
                <span class="s2">&quot;estadístico&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;p_valor&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;conclusion&quot;</span><span class="p">:</span> <span class="s2">&quot;Datos insuficientes&quot;</span>
            <span class="p">})</span>
            <span class="k">continue</span>

        <span class="c1"># Elegir método</span>
        <span class="k">if</span> <span class="n">metodo</span> <span class="o">==</span> <span class="s1">&#39;t-test&#39;</span><span class="p">:</span>
            <span class="n">estadistico</span><span class="p">,</span> <span class="n">p_valor</span> <span class="o">=</span> <span class="n">ttest_ind</span><span class="p">(</span><span class="n">datos_original</span><span class="p">,</span> <span class="n">datos_imputado</span><span class="p">,</span> <span class="n">equal_var</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Welch&#39;s t-test</span>
            <span class="n">prueba</span> <span class="o">=</span> <span class="s2">&quot;t de Student&quot;</span>
        <span class="k">elif</span> <span class="n">metodo</span> <span class="o">==</span> <span class="s1">&#39;mannwhitney&#39;</span><span class="p">:</span>
            <span class="n">estadistico</span><span class="p">,</span> <span class="n">p_valor</span> <span class="o">=</span> <span class="n">mannwhitneyu</span><span class="p">(</span><span class="n">datos_original</span><span class="p">,</span> <span class="n">datos_imputado</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;two-sided&#39;</span><span class="p">)</span>
            <span class="n">prueba</span> <span class="o">=</span> <span class="s2">&quot;Mann-Whitney U&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Método no reconocido. Usa &#39;t-test&#39; o &#39;mannwhitney&#39;.&quot;</span><span class="p">)</span>

        <span class="n">conclusion</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;Las distribuciones son IGUALES (no se rechaza H₀)&quot;</span>
            <span class="k">if</span> <span class="n">p_valor</span> <span class="o">&gt;</span> <span class="n">alpha</span>
            <span class="k">else</span> <span class="s2">&quot;Las distribuciones son DIFERENTES (se rechaza H₀)&quot;</span>
        <span class="p">)</span>

        <span class="n">resultados</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="n">variable</span><span class="p">,</span>
            <span class="s2">&quot;prueba&quot;</span><span class="p">:</span> <span class="n">prueba</span><span class="p">,</span>
            <span class="s2">&quot;estadístico&quot;</span><span class="p">:</span> <span class="n">estadistico</span><span class="p">,</span>
            <span class="s2">&quot;p_valor&quot;</span><span class="p">:</span> <span class="n">p_valor</span><span class="p">,</span>
            <span class="s2">&quot;conclusion&quot;</span><span class="p">:</span> <span class="n">conclusion</span>
        <span class="p">})</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_ttest_knn</span> <span class="o">=</span> <span class="n">comparar_distribuciones_numericas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_knn</span><span class="p">,</span> <span class="n">var_num_nor</span><span class="p">,</span> <span class="n">metodo</span><span class="o">=</span><span class="s1">&#39;t-test&#39;</span><span class="p">)</span>
<span class="n">resultados_mwu_knn</span> <span class="o">=</span> <span class="n">comparar_distribuciones_numericas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_knn</span><span class="p">,</span> <span class="n">var_num_no_nor</span><span class="p">,</span> <span class="n">metodo</span><span class="o">=</span><span class="s1">&#39;mannwhitney&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">resultados_ttest_knn</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">resultados_mwu_knn</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>             variable        prueba  estadístico   p_valor  \
0           altura_cm  t de Student    -0.037696  0.969934   
1            ingresos  t de Student     0.622812  0.533486   
2       gasto_mensual  t de Student     0.930853  0.352078   
3  puntuacion_credito  t de Student     3.774328  0.000172   

                                          conclusion  
0  Las distribuciones son IGUALES (no se rechaza H₀)  
1  Las distribuciones son IGUALES (no se rechaza H₀)  
2  Las distribuciones son IGUALES (no se rechaza H₀)  
3  Las distribuciones son DIFERENTES (se rechaza H₀)  


  variable          prueba  estadístico   p_valor  \
0     edad  Mann-Whitney U     485606.5  0.961700   
1  demanda  Mann-Whitney U     417695.0  0.523523   

                                          conclusion  
0  Las distribuciones son IGUALES (no se rechaza H₀)  
1  Las distribuciones son IGUALES (no se rechaza H₀)  
</pre></div>
</div>
</div>
</div>
<p>En esta sección se comparan las medias o rangos de variables numéricas antes y después de imputar los valores faltantes utilizando el método KNN. Para las variables con distribución normal se aplicó la prueba t de Student, mientras que para las variables no normales se utilizó la prueba de Mann-Whitney U. Los resultados muestran que las variables <strong>altura_cm</strong>, <strong>ingresos</strong> y <strong>gasto_mensual</strong> no presentan diferencias estadísticamente significativas después de la imputación (p-valores altos), lo que indica que el método KNN conservó bien las medias originales. Sin embargo, en la variable <strong>puntuacion_credito</strong>, se obtuvo un p-valor muy bajo (0.000172), por lo que se concluye que hubo un cambio significativo tras la imputación, lo cual sugiere que esta variable podría haber sido afectada por el proceso. Por otro lado, las variables <strong>edad</strong> y <strong>demanda</strong>, evaluadas con la prueba de Mann-Whitney U, tampoco mostraron diferencias significativas entre sus distribuciones originales e imputadas, lo que indica que el método KNN también fue adecuado en esos casos al no alterar significativamente los rangos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_ttest_reg</span> <span class="o">=</span> <span class="n">comparar_distribuciones_numericas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_reg</span><span class="p">,</span> <span class="n">var_num_nor</span><span class="p">,</span> <span class="n">metodo</span><span class="o">=</span><span class="s1">&#39;t-test&#39;</span><span class="p">)</span>
<span class="n">resultados_mwu_reg</span> <span class="o">=</span> <span class="n">comparar_distribuciones_numericas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_reg</span><span class="p">,</span> <span class="n">var_num_no_nor</span><span class="p">,</span> <span class="n">metodo</span><span class="o">=</span><span class="s1">&#39;mannwhitney&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">resultados_ttest_reg</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">resultados_mwu_reg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>             variable        prueba  estadístico   p_valor  \
0           altura_cm  t de Student    -0.018890  0.984931   
1            ingresos  t de Student     0.048908  0.960998   
2       gasto_mensual  t de Student     1.666044  0.095903   
3  puntuacion_credito  t de Student    -0.355994  0.721943   

                                          conclusion  
0  Las distribuciones son IGUALES (no se rechaza H₀)  
1  Las distribuciones son IGUALES (no se rechaza H₀)  
2  Las distribuciones son IGUALES (no se rechaza H₀)  
3  Las distribuciones son IGUALES (no se rechaza H₀)  


  variable          prueba  estadístico   p_valor  \
0     edad  Mann-Whitney U     485666.0  0.957943   
1  demanda  Mann-Whitney U     424103.0  0.937594   

                                          conclusion  
0  Las distribuciones son IGUALES (no se rechaza H₀)  
1  Las distribuciones son IGUALES (no se rechaza H₀)  
</pre></div>
</div>
</div>
</div>
<p>En esta parte del análisis se comparan las distribuciones de variables numéricas antes y después de imputar los datos faltantes utilizando el método de regresión. Para aquellas variables con distribución normal se aplicó la prueba t de Student, mientras que para las que no eran normales se usó la prueba de Mann-Whitney U. Los resultados muestran que en todos los casos los p-valores fueron altos, por lo que no se rechaza la hipótesis nula en ninguna de las variables analizadas. Esto indica que las distribuciones originales y las imputadas son estadísticamente iguales, lo que sugiere que la imputación por regresión logró mantener la estructura original de los datos numéricos sin introducir cambios significativos en las medias o rangos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_ttest_media</span> <span class="o">=</span> <span class="n">comparar_distribuciones_numericas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_media</span><span class="p">,</span> <span class="n">var_num_nor</span><span class="p">,</span> <span class="n">metodo</span><span class="o">=</span><span class="s1">&#39;t-test&#39;</span><span class="p">)</span>
<span class="n">resultados_mwu_mediana</span> <span class="o">=</span> <span class="n">comparar_distribuciones_numericas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado_mediana</span><span class="p">,</span> <span class="n">var_num_no_nor</span><span class="p">,</span> <span class="n">metodo</span><span class="o">=</span><span class="s1">&#39;mannwhitney&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">resultados_ttest_media</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">resultados_mwu_mediana</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>             variable        prueba   estadístico  p_valor  \
0           altura_cm  t de Student  0.000000e+00      1.0   
1            ingresos  t de Student  0.000000e+00      1.0   
2       gasto_mensual  t de Student -8.558774e-15      1.0   
3  puntuacion_credito  t de Student -2.848573e-14      1.0   

                                          conclusion  
0  Las distribuciones son IGUALES (no se rechaza H₀)  
1  Las distribuciones son IGUALES (no se rechaza H₀)  
2  Las distribuciones son IGUALES (no se rechaza H₀)  
3  Las distribuciones son IGUALES (no se rechaza H₀)  


  variable          prueba  estadístico  p_valor  \
0     edad  Mann-Whitney U     485075.0  0.99529   
1  demanda  Mann-Whitney U     425000.0  1.00000   

                                          conclusion  
0  Las distribuciones son IGUALES (no se rechaza H₀)  
1  Las distribuciones son IGUALES (no se rechaza H₀)  
</pre></div>
</div>
</div>
</div>
<p>En esta parte del análisis se comparan las variables numéricas antes y después de imputar los valores faltantes utilizando dos métodos simples: la media para variables normales y la mediana para variables no normales. Se aplicó la prueba t de Student en variables con distribución normal y la prueba de Mann-Whitney U en aquellas no normales. Los resultados muestran que en todos los casos los p-valores son muy altos (todos cercanos o iguales a 1), lo que indica que no hay diferencias estadísticamente significativas entre las distribuciones originales y las imputadas. Esto sugiere que imputar con la media o la mediana no alteró de manera importante la estructura de los datos numéricos.</p>
</section>
<section id="comparacion-general-de-los-metodos-de-imputacion-segun-la-comparacion-de-medias-rangos">
<h3><strong>6.4. Comparación general de los métodos de imputación (según la comparación de medias/rangos)</strong><a class="headerlink" href="#comparacion-general-de-los-metodos-de-imputacion-segun-la-comparacion-de-medias-rangos" title="Link to this heading">#</a></h3>
<section id="metodos-para-variables-categoricas">
<h4>Métodos para variables <strong>categóricas</strong><a class="headerlink" href="#metodos-para-variables-categoricas" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>KNN:</strong></p>
<ul>
<li><p>Funcionó bien para algunas variables (<strong>sexo</strong>, <strong>ciudad</strong>, <strong>nivel_educativo</strong>).</p></li>
<li><p>Alteró significativamente la distribución en <strong>estado_civil</strong> y <strong>segmento</strong>.</p></li>
<li><p>Introduce sesgos en categorías con más variabilidad.</p></li>
</ul>
</li>
<li><p><strong>Hot Deck:</strong></p>
<ul>
<li><p>Fue el método más robusto para variables categóricas.</p></li>
<li><p>Conservó la distribución en <strong>todas las variables categóricas</strong>.</p></li>
</ul>
</li>
<li><p><strong>Moda:</strong></p>
<ul>
<li><p>Solo conservó la distribución de <strong>sexo</strong> y <strong>ciudad</strong>.</p></li>
<li><p>Cambió significativamente <strong>nivel_educativo</strong>, <strong>estado_civil</strong> y <strong>segmento</strong>.</p></li>
<li><p>Es el método más simple pero menos preciso, ya que tiende a sobre-representar la categoría más frecuente.</p></li>
</ul>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="metodos-para-variables-numericas">
<h4>Métodos para variables <strong>numéricas</strong><a class="headerlink" href="#metodos-para-variables-numericas" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>KNN:</strong></p>
<ul>
<li><p>Conservó la distribución en la mayoría de las variables numéricas (<strong>altura_cm</strong>, <strong>ingresos</strong>, <strong>gasto_mensual</strong>, <strong>edad</strong>, <strong>demanda</strong>).</p></li>
<li><p>Solo <strong>puntuacion_credito</strong> presentó una diferencia significativa.</p></li>
<li><p>Buen desempeño general, aunque puede ser sensible a outliers o escalas distintas.</p></li>
</ul>
</li>
<li><p><strong>Regresión:</strong></p>
<ul>
<li><p>No hubo diferencias significativas en <strong>ninguna variable numérica</strong>.</p></li>
<li><p>Preservó tanto medias como rangos.</p></li>
</ul>
</li>
<li><p><strong>Media / Mediana:</strong></p>
<ul>
<li><p>Todos los p-valores fueron cercanos a 1, indicando que <strong>todas las distribuciones se conservaron perfectamente</strong>.</p></li>
<li><p>Sorprendentemente, estos métodos simples funcionaron muy bien en este conjunto de datos.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="conclusion-general">
<h3>Conclusión general<a class="headerlink" href="#conclusion-general" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>Hot Deck</strong> y <strong>Regresión</strong> fueron los métodos más estables en términos de mantener la distribución original.</p></li>
<li><p><strong>KNN</strong> tuvo un desempeño decente, pero con algunas fallas en variables específicas.</p></li>
<li><p><strong>Moda</strong> resultó ser el menos fiable para variables categóricas.</p></li>
<li><p><strong>Media / Mediana</strong>, aunque básicos, funcionaron de forma excelente con las variables numéricas de este dataset.</p></li>
</ul>
</section>
</section>
<section id="conlusion-preliminar">
<h2><em><strong>7. Conlusión preliminar</strong></em><a class="headerlink" href="#conlusion-preliminar" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>% Nulos</p></th>
<th class="head"><p>Tipo de Ausencia</p></th>
<th class="head"><p>Método sugerido de imputación</p></th>
<th class="head"><p>Evidencia sobre la distribución</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Sexo</p></td>
<td><p>2%</p></td>
<td><p>MAR</p></td>
<td><p>Moda</p></td>
<td><p>La imputación por Moda mantiene las frecuencias de las categorías casi idénticas a las originales; con tan pocos nulos no se altera la distribución.</p></td>
</tr>
<tr class="row-odd"><td><p>Ciudad</p></td>
<td><p>5%</p></td>
<td><p>MAR</p></td>
<td><p>KNN</p></td>
<td><p>La imputación con KNN conserva la proporción de categorías más cercana al original; las gráficas muestran menor desviación frente a Moda o Hot-Deck.</p></td>
</tr>
<tr class="row-even"><td><p>Nivel_educativo</p></td>
<td><p>10%</p></td>
<td><p>MAR</p></td>
<td><p>Hot Deck</p></td>
<td><p>Hot-Deck reproduce la variabilidad observada en las categorías y las distribuciones imputadas se asemejan a las originales según las frecuencias.</p></td>
</tr>
<tr class="row-odd"><td><p>Segmento</p></td>
<td><p>20%</p></td>
<td><p>MAR</p></td>
<td><p>Regresión</p></td>
<td><p>La imputación por Regresión genera distribuciones de categorías equivalentes a las originales; mantiene la estructura sin concentrar en una sola categoría como ocurre con Moda.</p></td>
</tr>
<tr class="row-even"><td><p>Estado_civil</p></td>
<td><p>35%</p></td>
<td><p>MAR</p></td>
<td><p>KNN</p></td>
<td><p>En las gráficas se observa que Moda concentra excesivamente en una categoría; KNN distribuye los valores imputados de forma más cercana a la original.</p></td>
</tr>
<tr class="row-odd"><td><p>Edad</p></td>
<td><p>3%</p></td>
<td><p>MCAR</p></td>
<td><p>Regresión</p></td>
<td><p>Test KS: estadístico=0.0087, p≈1.0 → distribuciones iguales; menor KS que KNN (0.0090). Regresión es el ajuste más fiel a la distribución original.</p></td>
</tr>
<tr class="row-even"><td><p>Altura_cm</p></td>
<td><p>8%</p></td>
<td><p>MAR</p></td>
<td><p>KNN</p></td>
<td><p>Test KS: estadístico=0.0188, p≈0.994 → mejor que Regresión (0.0339, p≈0.62) y Media (0.0401, p≈0.40). KNN conserva más la distribución original.</p></td>
</tr>
<tr class="row-odd"><td><p>Ingresos</p></td>
<td><p>12%</p></td>
<td><p>MAR</p></td>
<td><p>Regresión</p></td>
<td><p>Test KS: estadístico=0.0099, p≈1.0 → mejor que KNN (0.0247, p≈0.92) y Media (0.0602, p≈0.06). Regresión mantiene la distribución con mayor fidelidad.</p></td>
</tr>
<tr class="row-even"><td><p>Gasto_mensual</p></td>
<td><p>25%</p></td>
<td><p>MAR</p></td>
<td><p>Regresión</p></td>
<td><p>Test KS: estadístico=0.0486, p≈0.25 → distribuciones iguales. Media rechaza H₀ (p≈1.7e-06) y KNN es menos preciso (KS=0.058, p≈0.10).</p></td>
</tr>
<tr class="row-odd"><td><p>Puntuacion_credito</p></td>
<td><p>50%</p></td>
<td><p>MCAR</p></td>
<td><p>—</p></td>
<td><p>Todos los métodos difieren significativamente: KNN (KS=0.193, p≈2.7e-11), Regresión (KS=0.165, p≈2.3e-08), Media (KS=0.252, p≈4.9e-19). Ninguno mantiene la distribución.</p></td>
</tr>
<tr class="row-even"><td><p>Demanda</p></td>
<td><p>15%</p></td>
<td><p>MAR</p></td>
<td><p>KNN</p></td>
<td><p>Test KS: estadístico=0.0435, p≈0.33 → distribuciones iguales. Mejor que Regresión (KS=0.0585, p≈0.08), donde casi se rechaza H₀.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><strong>Taller de Imputación de Datos</strong></p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploracion-inicial-de-las-variables"><em><strong>1. Exploración inicial de las variables</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-dataset"><em><strong>1.1. Cargar dataset</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identificar-variables-cualitativas-y-cuantitativas"><em><strong>1.2. Identificar variables cualitativas y cuantitativas</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#observar-la-estructura-general-de-la-base-de-datos"><em><strong>1.3. Observar la estructura general de la base de datos</strong></em></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deteccion-de-valores-faltantes"><em><strong>2. Detección de valores faltantes</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#porcentajes"><em><strong>2.1. Porcentajes</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#representacion-grafica"><em><strong>2.2. Representación gráfica</strong></em></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clasificacion-del-tipo-faltante"><em><strong>3. Clasificación del tipo faltante</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#discusion-sobre-imputabilidad"><em><strong>4. Discusión sobre imputabilidad</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#representacion-de-la-imputacion"><em><strong>5. Representación de la imputación</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-numericas"><em><strong>5.1. Variables numéricas</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#knn-numericas"><em><strong>5.1.1. <code class="docutils literal notranslate"><span class="pre">knn</span> <span class="pre">-</span> <span class="pre">numéricas:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#regresion"><em><strong>5.1.2. <code class="docutils literal notranslate"><span class="pre">Regresión</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#media"><em><strong>5.1.3. <code class="docutils literal notranslate"><span class="pre">Media</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mediana"><em><strong>5.1.4. <code class="docutils literal notranslate"><span class="pre">Mediana</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#graficas-antes-y-despues"><em><strong>5.1.5. Gráficas antes y después:</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#knn"><em><strong>5.1.5.1. Knn</strong></em></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><em><strong>5.1.5.2. Regresión</strong></em></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id2"><em><strong>5.1.5.3. Media</strong></em></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id3"><em><strong>5.1.5.4. Mediana</strong></em></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-categoricas"><em><strong>5.2. Variables categóricas</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#knn-categoricas"><em><strong>5.2.1. <code class="docutils literal notranslate"><span class="pre">knn</span> <span class="pre">-</span> <span class="pre">categóricas:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hot-deck"><em><strong>5.2.2.<code class="docutils literal notranslate"><span class="pre">hot-deck:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#moda"><em><strong>5.2.3. <code class="docutils literal notranslate"><span class="pre">moda</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#grafico-de-barras"><em><strong>5.2.4. <code class="docutils literal notranslate"><span class="pre">Gráfico</span> <span class="pre">de</span> <span class="pre">barras:</span></code></strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id4"><strong>5.2.4.1. <code class="docutils literal notranslate"><span class="pre">knn:</span></code></strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id5"><strong>5.2.4.2. <code class="docutils literal notranslate"><span class="pre">hot-deck:</span></code></strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id6"><strong>5.2.4.3. <code class="docutils literal notranslate"><span class="pre">moda:</span></code></strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluacion-de-la-imputacion"><em><strong>6. Evaluación de la imputación</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pruebas-de-normalidad"><em><strong>6.1. Pruebas de normalidad</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pruebas-de-igualdad-de-distribuciones"><em><strong>6.2. Pruebas de igualdad de distribuciones</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id7"><em><strong>6.2.1. Variables numéricas</strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id8"><em><strong>6.2.2. Variables categóricas</strong></em></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-de-medias-o-rangos"><em><strong>6.3. Comparación de medias o rangos</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-general-de-los-metodos-de-imputacion-segun-la-comparacion-de-medias-rangos"><strong>6.4. Comparación general de los métodos de imputación (según la comparación de medias/rangos)</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#metodos-para-variables-categoricas">Métodos para variables <strong>categóricas</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#metodos-para-variables-numericas">Métodos para variables <strong>numéricas</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion-general">Conclusión general</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conlusion-preliminar"><em><strong>7. Conlusión preliminar</strong></em></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mariangel Mercado
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>